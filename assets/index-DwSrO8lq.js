import{r as T,d as z,s as S,w as A,u as E,o as V,C as Y,D as U,E as te,b as ne,e as oe,af as re}from"./vue.esm-bundler-DNj4lB-B.js";import{u as se}from"./index-C250A6Bf.js";import{h as ae,o as ue,l as ce,w as de}from"./install-B47IWttr.js";import{E as ie}from"./aria-BUADUvnR.js";/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const le=e=>typeof e=="string",j=e=>typeof Element>"u"?!1:e instanceof Element,fe=e=>{if(e.tabIndex>0||e.tabIndex===0&&e.getAttribute("tabIndex")!==null)return!0;if(e.tabIndex<0||e.hasAttribute("disabled")||e.getAttribute("aria-disabled")==="true")return!1;switch(e.nodeName){case"A":return!!e.href&&e.rel!=="ignore";case"INPUT":return!(e.type==="hidden"||e.type==="file");case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},P="focus-trap.focus-after-trapped",R="focus-trap.focus-after-released",pe="focus-trap.focusout-prevented",q={cancelable:!0,bubbles:!1},me={cancelable:!0,bubbles:!1},G="focusAfterTrapped",M="focusAfterReleased",ve=Symbol("elFocusTrap"),_=T(),h=T(0),F=T(0);let b=0;const J=e=>{const n=[],o=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const c=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||c?NodeFilter.FILTER_SKIP:r.tabIndex>=0||r===document.activeElement?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;o.nextNode();)n.push(o.currentNode);return n},$=(e,n)=>{for(const o of e)if(!Ee(o,n))return o},Ee=(e,n)=>{if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(n&&e===n)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1},be=e=>{const n=J(e),o=$(n,e),r=$(n.reverse(),e);return[o,r]},ye=e=>e instanceof HTMLInputElement&&"select"in e,i=(e,n)=>{if(e&&e.focus){const o=document.activeElement;let r=!1;j(e)&&!fe(e)&&!e.getAttribute("tabindex")&&(e.setAttribute("tabindex","-1"),r=!0),e.focus({preventScroll:!0}),F.value=window.performance.now(),e!==o&&ye(e)&&n&&e.select(),j(e)&&r&&e.removeAttribute("tabindex")}};function H(e,n){const o=[...e],r=e.indexOf(n);return r!==-1&&o.splice(r,1),o}const we=()=>{let e=[];return{push:n=>{const o=e[0];o&&n!==o&&o.pause(),e=H(e,n),e.unshift(n)},remove:n=>{e=H(e,n),e[0]?.resume?.()}}},Te=(e,n=!1)=>{const o=document.activeElement;for(const r of e)if(i(r,n),document.activeElement!==o)return},W=we(),he=()=>h.value>F.value,y=()=>{_.value="pointer",h.value=window.performance.now()},X=()=>{_.value="keyboard",h.value=window.performance.now()},Le=()=>(V(()=>{b===0&&(document.addEventListener("mousedown",y),document.addEventListener("touchstart",y),document.addEventListener("keydown",X)),b++}),Y(()=>{b--,b<=0&&(document.removeEventListener("mousedown",y),document.removeEventListener("touchstart",y),document.removeEventListener("keydown",X))}),{focusReason:_,lastUserFocusTimestamp:h,lastAutomatedFocusTimestamp:F}),w=e=>new CustomEvent(pe,{...me,detail:e}),ge=z({name:"GFocusTrap",inheritAttrs:!1,props:{loop:Boolean,trapped:Boolean,focusTrapEl:Object,focusStartEl:{type:[Object,String],default:"first"}},emits:[G,M,"focusin","focusout","focusout-prevented","release-requested"],setup(e,{emit:n}){const o=T();let r,c;const{focusReason:l}=Le();se(t=>{e.trapped&&!f.paused&&n("release-requested",t)});const f={paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}},p=t=>{if(!e.loop&&!e.trapped||f.paused)return;const{code:s,altKey:u,ctrlKey:a,metaKey:m,currentTarget:Z,shiftKey:B}=t,{loop:D}=e,ee=s===ie.tab&&!u&&!a&&!m,v=document.activeElement;if(ee&&v){const N=Z,[I,k]=be(N);if(I&&k){if(!B&&v===k){const d=w({focusReason:l.value});n("focusout-prevented",d),d.defaultPrevented||(t.preventDefault(),D&&i(I,!0))}else if(B&&[I,N].includes(v)){const d=w({focusReason:l.value});n("focusout-prevented",d),d.defaultPrevented||(t.preventDefault(),D&&i(k,!0))}}else if(v===N){const d=w({focusReason:l.value});n("focusout-prevented",d),d.defaultPrevented||t.preventDefault()}}};te(ve,{focusTrapRef:o,onKeydown:p}),A(()=>e.focusTrapEl,t=>{t&&(o.value=t)},{immediate:!0}),A([o],([t],[s])=>{t&&(t.addEventListener("keydown",p),t.addEventListener("focusin",L),t.addEventListener("focusout",g)),s&&(s.removeEventListener("keydown",p),s.removeEventListener("focusin",L),s.removeEventListener("focusout",g))});const K=t=>{n(G,t)},x=t=>n(M,t),L=t=>{const s=E(o);if(!s)return;const u=t.target,a=t.relatedTarget,m=u&&s.contains(u);e.trapped||a&&s.contains(a)||(r=a),m&&n("focusin",t),!f.paused&&e.trapped&&(m?c=u:i(c,!0))},g=t=>{const s=E(o);if(!(f.paused||!s))if(e.trapped){const u=t.relatedTarget;!ae(u)&&!s.contains(u)&&setTimeout(()=>{if(!f.paused&&e.trapped){const a=w({focusReason:l.value});n("focusout-prevented",a),a.defaultPrevented||i(c,!0)}},0)}else{const u=t.target;u&&s.contains(u)||n("focusout",t)}};async function C(){await U();const t=E(o);if(t){W.push(f);const s=t.contains(document.activeElement)?r:document.activeElement;if(r=s,!t.contains(s)){const u=new Event(P,q);t.addEventListener(P,K),t.dispatchEvent(u),u.defaultPrevented||U(()=>{let a=e.focusStartEl;le(a)||(i(a),document.activeElement!==a&&(a="first")),a==="first"&&Te(J(t),!0),(document.activeElement===s||a==="container")&&i(t)})}}}function O(){const t=E(o);if(t){t.removeEventListener(P,K);const s=new CustomEvent(R,{...q,detail:{focusReason:l.value}});t.addEventListener(R,x),t.dispatchEvent(s),!s.defaultPrevented&&(l.value=="keyboard"||!he()||t.contains(document.activeElement))&&i(r??document.body),t.removeEventListener(R,x),W.remove(f)}}return V(()=>{e.trapped&&C(),A(()=>e.trapped,t=>{t?C():O()})}),Y(()=>{e.trapped&&O(),o.value&&(o.value.removeEventListener("keydown",p),o.value.removeEventListener("focusin",L),o.value.removeEventListener("focusout",g),o.value=void 0)}),{onKeydown:p}}}),Ne=(e,n)=>{const o=e.__vccOpts||e;for(const[r,c]of n)o[r]=c;return o};function Ie(e,n,o,r,c,l){return S(e.$slots,"default",{handleKeydown:e.onKeydown})}const _e=Ne(ge,[["render",Ie]]),ke=ue({to:{type:ce([String,Object]),required:!0},disabled:Boolean}),Q=z({__name:"teleport",props:ke,setup(e){return(n,o)=>n.disabled?S(n.$slots,"default",{key:0}):(oe(),ne(re,{key:1,to:n.to},[S(n.$slots,"default")],8,["to"]))}});Q.__docgenInfo={exportName:"default",displayName:"teleport",description:"",tags:{},slots:[{name:"default"}],sourceFiles:["/home/runner/work/global-design-system/global-design-system/components/teleport/teleport.vue"]};const Fe=de(Q);export{Fe as G,_e as O,ve as a,i as d};
