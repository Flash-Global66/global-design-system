import{d as ee,Z as be,_ as sl,x as V,e as v,j as De,m as B,l as p,h as se,f as L,q as il,s as D,$ as rl,a0 as ul,k as w,a1 as G,b as pe,F as nt,z as st,n as ce,A as it,y as P,a2 as ge,a3 as pl,v as cl,c,H as Fe,X as dl,a4 as rt,E as fl,t as ml,a as ft,r as T,w as X,u as he,I as ie,a5 as vl,D as re,B as ut,o as gl}from"./vue.esm-bundler-C43JrhH2.js";import{b as hl}from"./index-Bjwq1aDC.js";import{A as pt,Y as bl}from"./index-CPy9gSVE.js";import{F as mt}from"./index-B1PxvDbZ.js";import{a as Y}from"./index-BDKGuxIf.js";import{G as yl,H as Sl}from"./index-DH2w0SzE.js";import{f as wl}from"./install-CfJGiCvs.js";import{u as xl}from"./index-CdSB2Bdf.js";import{b as Vl,c as Ol,d as Cl}from"./ConfigProvider-Br84NlF7.js";import{u as Il}from"./content-xefq6HC4.js";import{C as Tl}from"./index-hJ8KYCfA.js";import{u as kl,D as El,F as Ml,f as Rl}from"./dynamic-size-list-Cx2IIt4N.js";import{u as ye,j as W}from"./index-D5bIuBCX.js";import{a as Bl,u as $l}from"./index-D_xYoXKA.js";import{d as Nl}from"./debounce-Qaf-XsLG.js";import{i as He}from"./isEqual-Cz4oPyRM.js";/**
* @vue/shared v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const Ll=Object.prototype.hasOwnProperty,ct=(e,l)=>Ll.call(e,l),ue=Array.isArray,Ve=e=>typeof e=="function",Z=e=>e!==null&&typeof e=="object";const Dl=(e="")=>e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d"),Hl=e=>e===void 0,Fl=e=>typeof e=="boolean",Pe=e=>typeof e=="number";/*! Element Plus Icons Vue v2.3.2 */var Kl=ee({name:"CircleCheck",__name:"circle-check",setup(e){return(l,d)=>(v(),V("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[w("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"}),w("path",{fill:"currentColor",d:"M745.344 361.344a32 32 0 0 1 45.312 45.312l-288 288a32 32 0 0 1-45.312 0l-160-160a32 32 0 1 1 45.312-45.312L480 626.752z"})]))}}),Pl=Kl,zl=ee({name:"CircleClose",__name:"circle-close",setup(e){return(l,d)=>(v(),V("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[w("path",{fill:"currentColor",d:"m466.752 512-90.496-90.496a32 32 0 0 1 45.248-45.248L512 466.752l90.496-90.496a32 32 0 1 1 45.248 45.248L557.248 512l90.496 90.496a32 32 0 1 1-45.248 45.248L512 557.248l-90.496 90.496a32 32 0 0 1-45.248-45.248z"}),w("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"})]))}}),Al=zl,Gl=ee({name:"Loading",__name:"loading",setup(e){return(l,d)=>(v(),V("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[w("path",{fill:"currentColor",d:"M512 64a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0V96a32 32 0 0 1 32-32m0 640a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V736a32 32 0 0 1 32-32m448-192a32 32 0 0 1-32 32H736a32 32 0 1 1 0-64h192a32 32 0 0 1 32 32m-640 0a32 32 0 0 1-32 32H96a32 32 0 0 1 0-64h192a32 32 0 0 1 32 32M195.2 195.2a32 32 0 0 1 45.248 0L376.32 331.008a32 32 0 0 1-45.248 45.248L195.2 240.448a32 32 0 0 1 0-45.248m452.544 452.544a32 32 0 0 1 45.248 0L828.8 783.552a32 32 0 0 1-45.248 45.248L647.744 692.992a32 32 0 0 1 0-45.248M828.8 195.264a32 32 0 0 1 0 45.184L692.992 376.32a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0m-452.544 452.48a32 32 0 0 1 0 45.248L240.448 828.8a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0"})]))}}),Wl=Gl;const vt="__epPropKey",K=e=>e,_l=e=>Z(e)&&!!e[vt],jl=(e,l)=>{if(!Z(e)||_l(e))return e;const{values:d,required:i,default:b,type:y,validator:f}=e,g={type:y,required:!!i,validator:d||f?O=>{let h=!1,S=[];if(d&&(S=Array.from(d),ct(e,"default")&&S.push(b),h||(h=S.includes(O))),f&&(h||(h=f(O))),!h&&S.length>0){const s=[...new Set(S)].map($=>JSON.stringify($)).join(", ");ml(`Invalid prop: validation failed${l?` for prop "${l}"`:""}. Expected one of [${s}], got value ${JSON.stringify(O)}.`)}return h}:void 0,[vt]:!0};return ct(e,"default")&&(g.default=b),g},gt=e=>wl(Object.entries(e).map(([l,d])=>[l,jl(d,l)])),ql={validating:Wl,success:Pl,error:Al},Ul=(e,l)=>(e.install=d=>{for(const i of[e,...Object.values({})])d.component(i.name,i)},e),ht={tab:"Tab",enter:"Enter",up:"ArrowUp",down:"ArrowDown",esc:"Escape",delete:"Delete",numpadEnter:"NumpadEnter"},bt="update:modelValue",yt="change",Ql=ee({props:{item:{type:Object,required:!0},style:{type:Object},height:Number},setup(){return{ns:ye("select")}}}),ze=(e,l)=>{const d=e.__vccOpts||e;for(const[i,b]of l)d[i]=b;return d};function Jl(e,l,d,i,b,y){return v(),V("div",{class:p(e.ns.be("group","title")),style:ce(e.style)},P(e.item.title),7)}const Yl=ze(Ql,[["render",Jl]]);function Xl(e,{emit:l}){return{hoverItem:()=>{e.disabled||l("hover",e.index)},selectOptionClick:()=>{e.disabled||l("select",e.item,e.index)}}}const Ke={value:"value",disabled:"disabled",options:"options",icon:"icon",title:"title",description:"description"};function Oe(e){const l=c(()=>({...Ke,...e.props})),d=b=>y=>W(y,l.value[b]),i=Object.keys(Ke).reduce((b,y)=>(b[`get${y.charAt(0).toUpperCase()+y.slice(1)}`]=d(y),b),{});return{aliasProps:l,...i}}var Zl="top",ea="bottom",ta="right",la="left",aa="auto",oa=[Zl,ea,ta,la],na="start",sa="end",ia=[].concat(oa,[aa]).reduce(function(e,l){return e.concat([l,l+"-"+na,l+"-"+sa])},[]);const ra=gt({allowCreate:Boolean,autocomplete:{type:K(String),default:"none"},automaticDropdown:Boolean,clearable:Boolean,clearIcon:{type:K(String),default:"regular circle-xmark"},effect:{type:K(String),default:"light"},label:{type:String,default:void 0,required:!0},collapseTags:Boolean,collapseTagsTooltip:Boolean,maxCollapseTags:{type:Number,default:1},defaultFirstOption:Boolean,disabled:Boolean,estimatedOptionHeight:{type:Number,default:void 0},filterable:Boolean,filterMethod:Function,height:{type:Number,default:274},itemHeight:{type:Number,default:55},id:String,loading:Boolean,loadingText:String,modelValue:{type:K([Array,String,Number,Boolean,Object])},multiple:Boolean,multipleLimit:{type:Number,default:0},name:String,noDataText:String,noMatchText:String,remoteMethod:Function,reserveKeyword:{type:Boolean,default:!0},options:{type:K(Array),required:!0,default:()=>[]},placeholder:{type:String},helpText:{type:String,default:void 0},teleported:Il.teleported,persistent:{type:Boolean,default:!0},popperClass:{type:String,default:""},popperOptions:{type:K(Object),default:()=>({})},remote:Boolean,props:{type:K(Object),default:()=>Ke},valueKey:{type:String,default:"value"},scrollbarAlwaysOn:Boolean,validateEvent:{type:Boolean,default:!0},offset:{type:Number,default:12},showArrow:{type:Boolean,default:!0},placement:{type:K(String),values:ia,default:"bottom-start"},fallbackPlacements:{type:K(Array),default:["bottom-start","top-start","right","left"]},tagType:{...pt.type,default:"info"},tagEffect:{...pt.effect,default:"light"},emptyDisplay:Boolean,tabindex:{type:[String,Number],default:0},messageError:{type:String,default:void 0},prefixIcon:{type:K(String),default:""},appendTo:String,fitInputWidth:{type:[Boolean,Number],default:!0,validator(e){return Fl(e)||Pe(e)}},...Vl,...xl(["ariaLabel"])}),ua=gt({data:Array,disabled:Boolean,hovering:Boolean,item:{type:K(Object),required:!0},index:Number,style:Object,selected:Boolean,created:Boolean}),pa={[bt]:e=>!0,[yt]:e=>!0,"remove-tag":e=>!0,"visible-change":e=>!0,focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0},ca={hover:e=>Pe(e),select:(e,l)=>!0},Ae=Symbol("ElSelectV2Injection"),da=ee({props:ua,emits:ca,components:{GIconFont:mt},setup(e,{emit:l}){const d=ft(Ae),i=ye("select"),{hoverItem:b,selectOptionClick:y}=Xl(e,{emit:l}),{getIcon:f,getTitle:g,getDescription:O}=Oe(d.props),h=d.props.multiple;return{ns:i,hoverItem:b,selectOptionClick:y,getTitle:g,getDescription:O,getIcon:f,multiple:h}}}),fa=["aria-selected","data-test"];function ma(e,l,d,i,b,y){const f=be("g-icon-font");return v(),V("li",{"aria-selected":e.selected,"data-test":`item:${e.getTitle(e.item)}`,style:ce(e.style),class:p([e.ns.be("dropdown","item"),e.ns.is("selected",e.selected),e.ns.is("disabled",e.disabled),e.ns.is("created",e.created),e.ns.is("hovering",e.hovering)]),onMousemove:l[0]||(l[0]=(...g)=>e.hoverItem&&e.hoverItem(...g)),onClick:l[1]||(l[1]=G((...g)=>e.selectOptionClick&&e.selectOptionClick(...g),["stop"]))},[w("div",{class:p(e.ns.bem("dropdown","item","inner"))},[D(e.$slots,"default",{item:e.item,index:e.index,disabled:e.disabled},()=>[e.getIcon(e.item)?(v(),pe(f,{key:0,name:e.getIcon(e.item),class:p(e.ns.bem("dropdown","item","icon"))},null,8,["name","class"])):B("",!0),w("div",{class:p(e.ns.bem("dropdown","item","content"))},[w("span",{class:p(e.ns.bem("dropdown","item","title"))},P(e.getTitle(e.item)),3),e.getDescription(e.item)?(v(),V("span",{key:0,class:p(e.ns.bem("dropdown","item","description"))},P(e.getDescription(e.item)),3)):B("",!0)],2)]),e.selected&&e.multiple?(v(),pe(f,{key:0,class:p(e.ns.bem("dropdown","item","check")),name:"solid check","aria-hidden":"true",size:"xl"},null,8,["class"])):B("",!0)],2)],46,fa)}const va=ze(da,[["render",ma]]),dt=34,ga={loading:Boolean,data:{type:Array,required:!0},hoveringIndex:Number,width:Number},ha=ee({name:"GSelectDropdown",props:ga,setup(e,{slots:l,expose:d}){const i=ft(Ae),b=ye("select"),{getTitle:y,getValue:f,getDisabled:g}=Oe(i.props),O=T([]),h=T(),S=c(()=>e.data.length),s=c(()=>e.data.some(u=>u?.type==="Group"));X(()=>S.value,()=>{i.tooltipRef.value.updatePopper?.()}),X(()=>[e.data,i.props.itemHeight],()=>{s.value&&(O.value=e.data.map(u=>u?.type==="Group"?dt:i.props.itemHeight))},{immediate:!0});const $=c(()=>Hl(i.props.estimatedOptionHeight)),C=c(()=>s.value?{estimatedSize:i.props.itemHeight,itemSize:u=>O.value[u]??i.props.itemHeight}:$.value?{itemSize:i.props.itemHeight}:{estimatedSize:i.props.estimatedOptionHeight,itemSize:u=>O.value[u]}),k=(u=[],m)=>{const{props:{valueKey:E}}=i;return Z(m)?u&&u.some(H=>vl(W(H,E))===W(m,E)):u.includes(m)},a=(u,m)=>{if(Z(m)){const{valueKey:E}=i.props;return W(u,E)===W(m,E)}else return u===m},Q=(u,m)=>i.props.multiple?k(u,f(m)):a(u,f(m)),te=(u,m)=>{const{disabled:E,multiple:H,multipleLimit:z}=i.props;return E||!m&&(H?z>0&&u.length>=z:!1)},_=u=>e.hoveringIndex===u;d({listRef:h,isSized:$,isItemDisabled:te,isItemHovering:_,isItemSelected:Q,scrollToItem:u=>{const m=h.value;m&&m.scrollToItem(u)},resetScrollTop:()=>{const u=h.value;u&&u.resetScrollTop()}});const le=u=>{const{index:m,data:E,style:H}=u;he($);const{itemSize:z,estimatedSize:oe}=he(C),{modelValue:A}=i.props,{onSelect:J,onHover:Ie}=i,R=E[m];if(R.type==="Group")return ie(Yl,{item:R,style:H,height:dt});const I=Q(A,R),x=te(A,I),ne=_(m);return ie(va,{...u,selected:I,disabled:g(R)||x,created:!!R.created,hovering:ne,item:R,onSelect:J,onHover:Ie},{default:U=>l.default?.(U)||ie("span",{},y(R))})},{onKeyboardNavigate:ae,onKeyboardSelect:j}=i,de=()=>{ae("forward")},Ce=()=>{ae("backward")},q=u=>{const{code:m}=u,{tab:E,esc:H,down:z,up:oe,enter:A,numpadEnter:J}=ht;switch(m!==E&&(u.preventDefault(),u.stopPropagation()),m){case E:case H:break;case z:de();break;case oe:Ce();break;case A:case J:j();break}};return()=>{const{data:u,width:m}=e,{height:E,multiple:H,scrollbarAlwaysOn:z}=i.props,oe=he(s)||!he($)?El:Ml;return ie("div",{class:[b.b("dropdown"),b.is("multiple",H)],style:{width:`${m}px`}},[l.header?.(),l.loading?.()||l.empty?.()||ie(oe,{ref:h,...he(C),className:b.be("dropdown","list"),scrollbarAlwaysOn:z,data:u,height:E,width:m,total:u.length,onKeydown:q},{default:A=>ie(le,{...A})}),l.footer?.()].filter(Boolean))}}});function ba(e,l){const{aliasProps:d,getTitle:i,getValue:b}=Oe(e),y=T(0),f=T(),g=c(()=>e.allowCreate&&e.filterable);function O(C){const k=a=>i(a)===C;return e.options&&e.options.some(k)||l.createdOptions.some(k)}function h(C){g.value&&(e.multiple&&C.created?y.value++:f.value=C)}function S(C){if(g.value)if(C&&C.length>0){if(O(C))return;const k={[d.value.value]:C,[d.value.title]:C,created:!0,[d.value.disabled]:!1};l.createdOptions.length>=y.value?l.createdOptions[y.value]=k:l.createdOptions.push(k)}else if(e.multiple)l.createdOptions.length=y.value;else{const k=f.value;l.createdOptions.length=0,k&&k.created&&l.createdOptions.push(k)}}function s(C){if(!g.value||!C||!C.created||C.created&&e.reserveKeyword&&l.inputValue===i(C))return;const k=l.createdOptions.findIndex(a=>b(a)===b(C));~k&&(l.createdOptions.splice(k,1),y.value--)}function $(){g.value&&(l.createdOptions.length=0,y.value=0)}return{createNewOption:S,removeNewOption:s,selectNewOption:h,clearAllNewOption:$}}const ya=(e,l)=>{const{t:d}=Ol(),i=ye("select"),b=ye("input"),{form:y,formItem:f}=yl(),{inputId:g}=Sl(e,{formItemContext:f}),{aliasProps:O,getTitle:h,getValue:S,getDisabled:s,getOptions:$}=Oe(e),{valueOnClear:C,isEmptyValue:k}=Cl(e),a=Fe({inputValue:"",cachedOptions:[],createdOptions:[],hoveringIndex:-1,inputHovering:!1,selectionWidth:0,collapseItemWidth:0,previousQuery:null,previousValue:void 0,selectedLabel:"",menuVisibleOnFocus:!1,isBeforeHide:!1}),Q=T(-1),te=T(),_=T(),le=T(),ae=T(),j=T(),de=T(),Ce=T(),q=T(),u=T(),m=T(),{isComposing:E,handleCompositionStart:H,handleCompositionEnd:z,handleCompositionUpdate:oe}=Bl({afterComposition:t=>ot(t)}),{wrapperRef:A,isFocused:J,handleBlur:Ie}=$l(j,{beforeFocus(){return U.value},afterFocus(){e.automaticDropdown&&!x.value&&(x.value=!0,a.menuVisibleOnFocus=!0)},beforeBlur(t){return le.value?.isFocusInsideContent(t)||ae.value?.isFocusInsideContent(t)},afterBlur(){x.value=!1,a.menuVisibleOnFocus=!1}}),R=T([]),I=T([]),x=T(!1),ne=T(void 0),U=c(()=>e.disabled||y?.disabled),St=c(()=>{const t=I.value.length*e.itemHeight;return t>e.height?e.height:t}),fe=c(()=>e.multiple?ue(e.modelValue)&&e.modelValue.length>0:!k(e.modelValue)),wt=c(()=>e.clearable&&!U.value&&a.inputHovering&&fe.value),Ge=c(()=>e.remote&&e.filterable?"":"regular chevron-down"),xt=c(()=>e.prefixIcon),Vt=c(()=>Ge.value&&i.is("reverse",x.value)),Te=c(()=>f?.validateState||""),Ot=c(()=>{if(Te.value)return ql[Te.value]}),Se=c(()=>f?.shouldShowErrorChild||!!e?.messageError),Ct=c(()=>e?.messageError?e.messageError:f?.validateMessage??""),It=c(()=>!!(Se.value||f?.shouldShowError)),Tt=c(()=>[i.e("help-text"),{[i.e("help-error")]:Se.value}]),We=c(()=>e.remote?300:0),kt=c(()=>!!(f?.$el||Se.value||e.helpText)),_e=c(()=>e.loading?e.loadingText||d("el.select.loading"):e.remote&&!a.inputValue&&R.value.length===0?!1:e.filterable&&a.inputValue&&R.value.length>0&&I.value.length===0?e.noMatchText||d("el.select.noMatch"):R.value.length===0?e.noDataText||d("el.select.noData"):null),je=t=>{const o=n=>{if(e.filterable&&Ve(e.filterMethod)||e.filterable&&e.remote&&Ve(e.remoteMethod))return!0;const r=new RegExp(Dl(t),"i");return t?r.test(h(n)||""):!0};return e.loading?[]:[...a.createdOptions,...e.options].reduce((n,r)=>{const M=$(r);if(ue(M)){const F=M.filter(o);F.length>0&&n.push({title:h(r),type:"Group"},...F)}else(e.remote||o(r))&&n.push(r);return n},[])},qe=()=>{R.value=je(""),I.value=je(a.inputValue)},Ue=c(()=>{const t=new Map;return R.value.forEach((o,n)=>{t.set(N(S(o)),{option:o,index:n})}),t}),we=c(()=>{const t=new Map;return I.value.forEach((o,n)=>{t.set(N(S(o)),{option:o,index:n})}),t}),Et=c(()=>I.value.every(t=>s(t))),me=()=>{if(Pe(e.fitInputWidth)){Q.value=e.fitInputWidth;return}const t=te.value?.offsetWidth||200;!e.fitInputWidth&&R.value.length>0?re(()=>{Q.value=Math.max(t,Mt())}):Q.value=t},Mt=()=>{const t=document.createElement("canvas").getContext("2d"),o=i.be("dropdown","item"),n=(q.value?.listRef?.innerRef||document).querySelector(`.${o}`);if(n===null||t===null)return 0;const r=getComputedStyle(n),M=Number.parseFloat(r.paddingLeft)+Number.parseFloat(r.paddingRight);return t.font=r.font,I.value.reduce((F,ol)=>{const nl=t.measureText(h(ol));return Math.max(nl.width,F)},0)+M},Rt=()=>{if(!_.value)return 0;const t=window.getComputedStyle(_.value);return Number.parseFloat(t.gap||"6px")},Bt=c(()=>{const t=Rt();return{maxWidth:`${m.value&&e.maxCollapseTags===1?a.selectionWidth-a.collapseItemWidth-t:a.selectionWidth}px`}}),$t=c(()=>({maxWidth:`${a.selectionWidth}px`})),Nt=c(()=>ue(e.modelValue)?(e.emptyDisplay||e.modelValue.length===0)&&!a.inputValue:e.filterable?!a.inputValue:!0),Lt=c(()=>{const t=e.placeholder??"Selecciona una opción";return e.multiple||!fe.value?t:a.selectedLabel}),Dt=c(()=>le.value?.popperRef?.contentRef),Ht=c(()=>{if(e.multiple){const t=e.modelValue.length;if(e.modelValue.length>0&&we.value.has(e.modelValue[t-1])){const{index:o}=we.value.get(e.modelValue[t-1]);return o}}else if(!k(e.modelValue)&&we.value.has(e.modelValue)){const{index:t}=we.value.get(e.modelValue);return t}return-1}),Ft=c({get(){return x.value&&_e.value!==!1},set(t){x.value=t}}),Kt=c(()=>e.multiple?e.collapseTags?a.cachedOptions.slice(0,e.maxCollapseTags):a.cachedOptions:[]),Pt=c(()=>e.multiple?e.collapseTags?a.cachedOptions.slice(e.maxCollapseTags):[]:[]),{createNewOption:Qe,removeNewOption:ke,selectNewOption:Je,clearAllNewOption:Ee}=ba(e,a),Me=()=>{U.value||(a.menuVisibleOnFocus?a.menuVisibleOnFocus=!1:x.value=!x.value)},Ye=()=>{a.inputValue.length>0&&!x.value&&(x.value=!0),Qe(a.inputValue),Re(a.inputValue)},Xe=Nl(Ye,We.value),Re=t=>{a.previousQuery===t||E.value||(a.previousQuery=t,e.filterable&&Ve(e.filterMethod)?e.filterMethod(t):e.filterable&&e.remote&&Ve(e.remoteMethod)&&e.remoteMethod(t),e.defaultFirstOption&&(e.filterable||e.remote)&&I.value.length?re(zt):re(Xt))},zt=()=>{const t=I.value.filter(r=>!r.disabled&&r.type!=="Group"),o=t.find(r=>r.created),n=t[0];a.hoveringIndex=Be(I.value,o||n)},At=t=>{He(e.modelValue,t)||l(yt,t)},ve=t=>{l(bt,t),At(t),a.previousValue=e.multiple?String(t):t},Be=(t=[],o)=>{if(!Z(o))return t.indexOf(o);const n=e.valueKey;let r=-1;return t.some((M,F)=>W(M,n)===W(o,n)?(r=F,!0):!1),r},N=t=>Z(t)?W(t,e.valueKey):t,Ze=()=>{me()},et=()=>{a.selectionWidth=_.value.getBoundingClientRect().width},Gt=()=>{a.collapseItemWidth=m.value.getBoundingClientRect().width},$e=()=>{le.value?.updatePopper?.()},tt=()=>{ae.value?.updatePopper?.()},lt=t=>{if(e.multiple){let o=e.modelValue.slice();const n=Be(o,S(t));n>-1?(o=[...o.slice(0,n),...o.slice(n+1)],a.cachedOptions.splice(n,1),ke(t)):(e.multipleLimit<=0||o.length<e.multipleLimit)&&(o=[...o,S(t)],a.cachedOptions.push(t),Je(t)),ve(o),t.created&&Re(""),e.filterable&&!e.reserveKeyword&&(a.inputValue="")}else a.selectedLabel=h(t),ve(S(t)),x.value=!1,Je(t),t.created||Ee();xe()},Wt=(t,o)=>{let n=e.modelValue.slice();const r=Be(n,S(o));r>-1&&!U.value&&(n=[...e.modelValue.slice(0,r),...e.modelValue.slice(r+1)],a.cachedOptions.splice(r,1),ve(n),l("remove-tag",S(o)),ke(o)),t.stopPropagation(),xe()},xe=()=>{j.value?.focus()},_t=()=>{if(x.value){x.value=!1,re(()=>j.value?.blur());return}j.value?.blur()},jt=()=>{a.inputValue.length>0?a.inputValue="":x.value=!1},qt=t=>Rl(t,o=>!a.cachedOptions.some(n=>S(n)===o&&s(n))),Ut=t=>{if(e.multiple&&t.code!==ht.delete&&a.inputValue.length===0){t.preventDefault();const o=e.modelValue.slice(),n=qt(o);if(n<0)return;const r=o[n];o.splice(n,1);const M=a.cachedOptions[n];a.cachedOptions.splice(n,1),ke(M),ve(o),l("remove-tag",r)}},Qt=()=>{let t;ue(e.modelValue)?t=[]:t=C.value,e.multiple?a.cachedOptions=[]:a.selectedLabel="",x.value=!1,ve(t),l("clear"),Ee(),xe()},at=(t,o=void 0)=>{const n=I.value;if(!["forward","backward"].includes(t)||U.value||n.length<=0||Et.value||E.value)return;if(!x.value)return Me();o===void 0&&(o=a.hoveringIndex);let r=-1;t==="forward"?(r=o+1,r>=n.length&&(r=0)):t==="backward"&&(r=o-1,(r<0||r>=n.length)&&(r=n.length-1));const M=n[r];if(s(M)||M.type==="Group")return at(t,r);a.hoveringIndex=r,Ne(r)},Jt=()=>{if(x.value)~a.hoveringIndex&&I.value[a.hoveringIndex]&&lt(I.value[a.hoveringIndex]);else return Me()},Yt=t=>{a.hoveringIndex=t??-1},Xt=()=>{e.multiple?a.hoveringIndex=I.value.findIndex(t=>e.modelValue.some(o=>N(o)===N(t))):a.hoveringIndex=I.value.findIndex(t=>N(t)===N(e.modelValue))},ot=t=>{if(a.inputValue=t.target.value,e.remote)Xe();else return Ye()},Zt=t=>{if(x.value=!1,J.value){const o=new FocusEvent("focus",t);Ie(o)}},el=()=>(a.isBeforeHide=!1,re(()=>{~Ht.value&&Ne(a.hoveringIndex)})),Ne=t=>{q.value.scrollToItem(t)},tl=(t,o)=>{const n=N(t);if(Ue.value.has(n)){const{option:r}=Ue.value.get(n);return r}if(o&&o.length){const r=o.find(M=>N(S(M))===n);if(r)return r}return{[O.value.value]:t,[O.value.title]:t}},ll=()=>{if(!e.prefixIcon&&!e.slots.prefix){ne.value="-7px";return}requestAnimationFrame(()=>{const t=de.value?.getBoundingClientRect().width;ne.value=`${t}px`})},al=c(()=>({left:fe.value||J.value?void 0:`calc(${ne.value} + 18px)`})),Le=(t=!1)=>{if(e.multiple)if(e.modelValue.length>0){const o=a.cachedOptions.slice();a.cachedOptions.length=0,a.previousValue=e.modelValue.toString();for(const n of e.modelValue){const r=tl(n,o);a.cachedOptions.push(r)}}else a.cachedOptions=[],a.previousValue=void 0;else if(fe.value){a.previousValue=e.modelValue;const o=I.value,n=o.findIndex(r=>N(S(r))===N(e.modelValue));~n?a.selectedLabel=h(o[n]):(!a.selectedLabel||t)&&(a.selectedLabel=N(e.modelValue))}else a.selectedLabel="",a.previousValue=void 0;Ee(),me()};return X(()=>e.fitInputWidth,()=>{me()}),X(x,t=>{t?(e.persistent||me(),Re("")):(a.inputValue="",a.previousQuery=null,a.isBeforeHide=!0,Qe("")),l("visible-change",t)}),X(()=>e.modelValue,(t,o)=>{(!t||ue(t)&&t.length===0||e.multiple&&!He(t.toString(),a.previousValue)||!e.multiple&&N(t)!==N(a.previousValue))&&Le(!0),!He(t,o)&&e.validateEvent&&f?.validate?.("change").catch(n=>void 0)},{deep:!0}),X(()=>e.options,()=>{const t=j.value;(!t||t&&document.activeElement!==t)&&Le()},{deep:!0,flush:"post"}),X(()=>I.value,()=>(me(),q.value&&re(q.value.resetScrollTop))),ut(()=>{a.isBeforeHide||qe()}),ut(()=>{const{valueKey:t,options:o}=e,n=new Map;for(const r of o){const M=S(r);let F=M;if(Z(F)&&(F=W(M,t)),n.get(F))break;n.set(F,!0)}}),gl(()=>{Le()}),Y(te,Ze),Y(_,et),Y(q,$e),Y(A,$e),Y(u,tt),Y(m,Gt),Y(de,ll),{inputId:g,currentPlaceholder:Lt,expanded:x,emptyText:_e,popupHeight:St,debounce:We,allOptions:R,filteredOptions:I,iconComponent:Ge,iconReverse:Vt,prefixIcon:xt,tagStyle:Bt,collapseTagStyle:$t,popperSize:Q,dropdownMenuVisible:Ft,hasModelValue:fe,shouldShowPlaceholder:Nt,selectDisabled:U,showClearBtn:wt,states:a,isFocused:J,nsSelect:i,nsInput:b,leftPrefixSelect:ne,labelStyle:al,selectError:Se,descriptionError:Ct,helpTextKls:Tt,isErrorKls:It,hasHelpInfo:kt,inputRef:j,menuRef:q,tagMenuRef:u,tooltipRef:le,tagTooltipRef:ae,selectRef:te,wrapperRef:A,selectionRef:_,prefixRef:de,suffixRef:Ce,collapseItemRef:m,popperRef:Dt,validateState:Te,validateIcon:Ot,showTagList:Kt,collapseTagList:Pt,debouncedOnInputChange:Xe,deleteTag:Wt,getTitle:h,getValue:S,getDisabled:s,getValueKey:N,handleClear:Qt,handleClickOutside:Zt,handleDel:Ut,handleEsc:jt,focus:xe,blur:_t,handleMenuEnter:el,handleResize:Ze,resetSelectionWidth:et,updateTooltip:$e,updateTagTooltip:tt,updateOptions:qe,toggleMenu:Me,scrollTo:Ne,onInput:ot,onKeyboardNavigate:at,onKeyboardSelect:Jt,onSelect:lt,onHover:Yt,handleCompositionStart:H,handleCompositionEnd:z,handleCompositionUpdate:oe}},Sa=ee({name:"GSelect",components:{GSelectMenu:ha,GTag:bl,GTooltip:hl,GIconFont:mt},directives:{ClickOutside:Tl},props:ra,emits:pa,setup(e,{emit:l}){const d=c(()=>{const{modelValue:g,multiple:O}=e,h=O?[]:void 0;return ue(g)?O?g:h:O?h:g}),i=ya(Fe({...rt(e),modelValue:d,slots:dl()}),l),{calculatorRef:b,inputStyle:y}=kl();fl(Ae,{props:Fe({...rt(e),height:i.popupHeight,modelValue:d}),expanded:i.expanded,tooltipRef:i.tooltipRef,onSelect:i.onSelect,onHover:i.onHover,onKeyboardNavigate:i.onKeyboardNavigate,onKeyboardSelect:i.onKeyboardSelect});const f=c(()=>e.multiple?i.states.cachedOptions.map(g=>g.label):i.states.selectedLabel);return{...i,modelValue:d,selectedLabel:f,calculatorRef:b,inputStyle:y}}}),wa={class:"selectContainer"},xa=["id","autocomplete","tabindex","aria-expanded","aria-label","disabled","readonly","name","data-test"],Va=["textContent"],Oa={key:1},Ca={key:0};function Ia(e,l,d,i,b,y){const f=be("g-icon-font"),g=be("g-tag"),O=be("g-tooltip"),h=be("g-select-menu"),S=sl("click-outside");return v(),V("div",wa,[De((v(),V("div",{ref:"selectRef",class:p([e.nsSelect.b(),e.nsSelect.is("error",e.isErrorKls)]),onMouseenter:l[13]||(l[13]=s=>e.states.inputHovering=!0),onMouseleave:l[14]||(l[14]=s=>e.states.inputHovering=!1)},[se(O,{ref:"tooltipRef",visible:e.dropdownMenuVisible,teleported:e.teleported,"is-component":"","popper-class":`${e.nsSelect.e("popper")} ${e.popperClass??""}`,"gpu-acceleration":!1,"stop-popper-mouse-event":!1,"popper-options":e.popperOptions,"fallback-placements":e.fallbackPlacements,effect:e.effect,placement:e.placement,pure:"",transition:`${e.nsSelect.namespace.value}-zoom-in-top`,trigger:"click",persistent:e.persistent,"append-to":e.appendTo,"show-arrow":e.showArrow,offset:e.offset,onBeforeShow:e.handleMenuEnter,onHide:l[12]||(l[12]=s=>e.states.isBeforeHide=!1)},{default:L(()=>[w("div",{ref:"wrapperRef",class:p([e.nsSelect.e("wrapper"),e.nsSelect.is("focused",e.isFocused),e.nsSelect.is("hovering",e.states.inputHovering),e.nsSelect.is("filterable",e.filterable),e.nsSelect.is("disabled",e.selectDisabled),e.nsSelect.is("complete",!e.isFocused&&!!e.hasModelValue)]),onClick:l[11]||(l[11]=G((...s)=>e.toggleMenu&&e.toggleMenu(...s),["prevent"]))},[e.$slots.prefix||e.prefixIcon?(v(),V("div",{key:0,ref:"prefixRef",class:p(e.nsSelect.e("prefix"))},[D(e.$slots,"prefix",{},()=>[e.prefixIcon?(v(),pe(f,{key:0,class:p([e.nsSelect.e("icon"),e.nsSelect.e("prefix-icon")]),name:e.prefixIcon},null,8,["class","name"])):B("",!0)])],2)):B("",!0),w("div",{ref:"selectionRef",class:p([e.nsSelect.e("selection"),e.nsSelect.is("near",e.multiple&&!e.emptyDisplay&&!e.$slots.prefix&&!!e.modelValue.length)])},[e.multiple&&!e.emptyDisplay?D(e.$slots,"tag",{key:0},()=>[(v(!0),V(nt,null,st(e.showTagList,s=>(v(),V("div",{key:e.getValueKey(e.getValue(s)),class:p(e.nsSelect.e("selected-item"))},[se(g,{closable:!e.selectDisabled&&!e.getDisabled(s),type:e.tagType,effect:e.tagEffect,"disable-transitions":"",style:ce(e.tagStyle),onClose:$=>e.deleteTag($,s)},{default:L(()=>[w("span",{class:p(e.nsSelect.e("tags-text"))},[D(e.$slots,"selectedLabel",{label:e.getTitle(s),value:e.getValue(s)},()=>[it(P(e.getTitle(s)),1)])],2)]),_:2},1032,["closable","type","effect","style","onClose"])],2))),128)),e.collapseTags&&e.modelValue.length>e.maxCollapseTags?(v(),pe(O,{key:0,ref:"tagTooltipRef",disabled:e.dropdownMenuVisible||!e.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],effect:e.effect,placement:"bottom",teleported:e.teleported},{default:L(()=>[w("div",{ref:"collapseItemRef",class:p(e.nsSelect.e("selected-item"))},[se(g,{closable:!1,type:e.tagType,effect:e.tagEffect,style:ce(e.collapseTagStyle),"disable-transitions":""},{default:L(()=>[w("span",{class:p(e.nsSelect.e("tags-text"))}," + "+P(e.modelValue.length-e.maxCollapseTags),3)]),_:1},8,["type","effect","style"])],2)]),content:L(()=>[w("div",{ref:"tagMenuRef",class:p(e.nsSelect.e("selection"))},[(v(!0),V(nt,null,st(e.collapseTagList,s=>(v(),V("div",{key:e.getValueKey(e.getValue(s)),class:p(e.nsSelect.e("selected-item"))},[se(g,{class:"in-tooltip",closable:!e.selectDisabled&&!e.getDisabled(s),type:e.tagType,effect:e.tagEffect,"disable-transitions":"",onClose:$=>e.deleteTag($,s)},{default:L(()=>[w("span",{class:p(e.nsSelect.e("tags-text"))},[D(e.$slots,"selectedLabel",{label:e.getTitle(s),value:e.getValue(s)},()=>[it(P(e.getTitle(s)),1)])],2)]),_:2},1032,["closable","type","effect","onClose"])],2))),128))],2)]),_:3},8,["disabled","effect","teleported"])):B("",!0)]):B("",!0),w("div",{class:p([e.nsSelect.e("selected-item"),e.nsSelect.e("input-wrapper"),e.nsSelect.is("hidden",!e.filterable),e.nsSelect.is("withIcon",!!e.prefixIcon)])},[De(w("input",{id:e.inputId,ref:"inputRef","onUpdate:modelValue":l[0]||(l[0]=s=>e.states.inputValue=s),style:ce(e.inputStyle),autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-autocomplete":"list","aria-haspopup":"listbox",autocapitalize:"off","aria-expanded":e.expanded,"aria-label":e.ariaLabel,class:p([e.nsSelect.e("input")]),disabled:e.selectDisabled,role:"combobox",readonly:!e.filterable,spellcheck:"false",type:"text",name:e.name,"data-test":`select-input:${e.name||e.label}`,onInput:l[1]||(l[1]=(...s)=>e.onInput&&e.onInput(...s)),onCompositionstart:l[2]||(l[2]=(...s)=>e.handleCompositionStart&&e.handleCompositionStart(...s)),onCompositionupdate:l[3]||(l[3]=(...s)=>e.handleCompositionUpdate&&e.handleCompositionUpdate(...s)),onCompositionend:l[4]||(l[4]=(...s)=>e.handleCompositionEnd&&e.handleCompositionEnd(...s)),onKeydown:[l[5]||(l[5]=ge(G(s=>e.onKeyboardNavigate("backward"),["stop","prevent"]),["up"])),l[6]||(l[6]=ge(G(s=>e.onKeyboardNavigate("forward"),["stop","prevent"]),["down"])),l[7]||(l[7]=ge(G((...s)=>e.onKeyboardSelect&&e.onKeyboardSelect(...s),["stop","prevent"]),["enter"])),l[8]||(l[8]=ge(G((...s)=>e.handleEsc&&e.handleEsc(...s),["stop","prevent"]),["esc"])),l[9]||(l[9]=ge(G((...s)=>e.handleDel&&e.handleDel(...s),["stop"]),["delete"]))],onClick:l[10]||(l[10]=G((...s)=>e.toggleMenu&&e.toggleMenu(...s),["stop"]))},null,46,xa),[[pl,e.states.inputValue]]),e.filterable?(v(),V("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:p(e.nsSelect.e("input-calculator")),textContent:P(e.states.inputValue)},null,10,Va)):B("",!0)],2),e.label?(v(),V("div",{key:1,class:p([e.nsSelect.e("label")]),style:ce(e.labelStyle)},P(e.label),7)):B("",!0),e.shouldShowPlaceholder?(v(),V("div",{key:2,class:p([e.nsSelect.e("selected-item"),e.nsSelect.e("placeholder"),e.nsSelect.is("transparent",!e.hasModelValue||e.expanded&&!e.states.inputValue),"dynamic-label-select"])},[e.hasModelValue?D(e.$slots,"selectedLabel",{key:0,label:e.currentPlaceholder,value:e.modelValue},()=>[w("span",null,P(e.currentPlaceholder),1)]):(v(),V("span",Oa,P(e.currentPlaceholder),1))],2)):B("",!0)],2),w("div",{ref:"suffixRef",class:p(e.nsSelect.e("suffix"))},[e.iconComponent&&e.showArrow?De((v(),pe(f,{key:0,class:p([e.nsSelect.e("caret"),e.nsInput.e("icon"),e.iconReverse]),name:e.iconComponent},null,8,["class","name"])),[[cl,!e.showClearBtn]]):B("",!0),e.showClearBtn&&e.clearIcon?(v(),pe(f,{key:1,class:p([e.nsSelect.e("caret"),e.nsInput.e("icon"),e.nsSelect.e("clear")]),onClick:G(e.handleClear,["prevent","stop"]),name:"regular circle-xmark"},null,8,["class","onClick"])):B("",!0)],2)],2)]),content:L(()=>[se(h,{ref:"menuRef",data:e.filteredOptions,width:e.popperSize,"hovering-index":e.states.hoveringIndex,"scrollbar-always-on":e.scrollbarAlwaysOn},il({default:L(s=>[D(e.$slots,"default",rl(ul(s)))]),_:2},[e.$slots.header?{name:"header",fn:L(()=>[w("div",{class:p(e.nsSelect.be("dropdown","header"))},[D(e.$slots,"header")],2)]),key:"0"}:void 0,e.$slots.loading&&e.loading?{name:"loading",fn:L(()=>[w("div",{class:p(e.nsSelect.be("dropdown","loading"))},[D(e.$slots,"loading")],2)]),key:"1"}:e.loading||e.filteredOptions.length===0?{name:"empty",fn:L(()=>[e.filteredOptions.length===0&&!e.loading?(v(),V("div",Ca,[e.$slots.empty?D(e.$slots,"empty",{key:0}):(v(),V("div",{key:1,class:p(e.nsSelect.be("dropdown","empty"))},[w("span",{class:p(e.nsSelect.bem("dropdown","empty","title"))}," No hay coincidencias ",2),w("span",{class:p(e.nsSelect.bem("dropdown","empty","description"))}," Revisa tu búsqueda o intenta con otras palabras ",2)],2))])):B("",!0),e.loading?(v(),V("div",{key:1,class:p(e.nsSelect.be("dropdown","loading"))},[se(f,{name:"solid spinner","spin-pulse":""})],2)):B("",!0)]),key:"2"}:void 0,e.$slots.footer?{name:"footer",fn:L(()=>[w("div",{class:p(e.nsSelect.be("dropdown","footer"))},[D(e.$slots,"footer")],2)]),key:"3"}:void 0]),1032,["data","width","hovering-index","scrollbar-always-on"])]),_:3},8,["visible","teleported","popper-class","popper-options","fallback-placements","effect","placement","transition","persistent","append-to","show-arrow","offset","onBeforeShow"])],34)),[[S,e.handleClickOutside,e.popperRef]]),e.hasHelpInfo?(v(),V("div",{key:0,class:p([e.nsSelect.e("help")])},[D(e.$slots,"helpText",{selectError:e.selectError},()=>[(v(),V("p",{key:e.selectError?"error":"help",class:p(e.helpTextKls)},P(e.selectError?e.descriptionError:e.helpText),3))])],2)):B("",!0)])}const Ta=ze(Sa,[["render",Ia]]),Wa=Ul(Ta);export{Wa as G};
