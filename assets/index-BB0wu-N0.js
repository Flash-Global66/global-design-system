import{d as Ie,x as V,e as g,y as A,n as re,l as d,c as u,a as ft,Z as fe,s as L,b as me,m as R,k as T,a1 as q,r as O,w as se,u as Ve,N as ne,ad as ge,a5 as rl,H as We,B as it,o as ul,D as oe,Y as ie,G as Oe,X as dl,a4 as rt,E as cl,j as Pe,_ as pl,h as ae,f as H,q as fl,$ as ml,a0 as gl,F as ut,z as dt,a2 as pe,a3 as vl,v as hl,A as ct}from"./vue.esm-bundler-DNj4lB-B.js";import{b as bl}from"./index-Bd7W3cLU.js";import{A as pt,Y as yl}from"./index-zNF5UqKu.js";import{v as mt}from"./index-CaVzmfVp.js";import{u as ve,k as U,o as gt,l as W,q as Sl,e as ze,z as wl,w as Vl}from"./install-B47IWttr.js";import{_ as Ge}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{C as vt,U as ht}from"./event-HEVJa2N9.js";import{u as Ol}from"./index-DG2QIyoI.js";import{b as Il,c as Cl,d as Tl}from"./ConfigProvider-Dyindn-M.js";import{u as kl}from"./content-dmReybV6.js";import{F as El,D as $l,f as Bl,u as Ml}from"./dynamic-size-list-BHNHdvzl.js";import{E as bt}from"./aria-BUADUvnR.js";import{a as x}from"./index-CP3_1Uby.js";import{H as Rl,G as Nl}from"./index-CKHqQBpj.js";import{a as Dl,u as Fl}from"./index-DxdbiDHw.js";import{d as Hl}from"./debounce-C_YaMYrY.js";import{V as Ll}from"./icon-D8VNkFKm.js";import{i as Ke}from"./isEqual-BKrdcPcp.js";import{d as Pl}from"./error-Cq9Fpw4b.js";import{C as Kl}from"./index-hY69rTld.js";const Wl=(e="")=>e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d"),yt=Ie({props:{item:{type:Object,required:!0},style:{type:Object},height:Number},setup(){return{ns:ve("select")}}});function Al(e,n,b,r,y,v){return g(),V("div",{class:d(e.ns.be("group","title")),style:re({...e.style,lineHeight:`${e.height}px`})},A(e.item.label),7)}const zl=Ge(yt,[["render",Al]]);yt.__docgenInfo={exportName:"default",displayName:"group-item",description:"",tags:{},props:[{name:"item",type:{name:"object"},required:!0},{name:"style",type:{name:"CSSProperties"}},{name:"height",type:{name:"number"}}],sourceFiles:["/home/runner/work/global-design-system/global-design-system/components/select/src/group-item.vue"]};function Gl(e,{emit:n}){return{hoverItem:()=>{e.disabled||n("hover",e.index)},selectOptionClick:()=>{e.disabled||n("select",e.item,e.index)}}}const Ae={value:"value",disabled:"disabled",options:"options",icon:"icon",title:"title",description:"description"};function Ce(e){const n=u(()=>({...Ae,...e.props})),b=y=>v=>U(v,n.value[y]),r=Object.keys(Ae).reduce((y,v)=>(y[`get${v.charAt(0).toUpperCase()+v.slice(1)}`]=b(v),y),{});return{aliasProps:n,...r}}var jl="top",ql="bottom",Ul="right",Ql="left",Yl="auto",Xl=[jl,ql,Ul,Ql],Zl="start",Jl="end",xl=[].concat(Xl,[Yl]).reduce(function(e,n){return e.concat([n,n+"-"+Zl,n+"-"+Jl])},[]);const _l=gt({allowCreate:Boolean,autocomplete:{type:W(String),default:"none"},automaticDropdown:Boolean,clearable:Boolean,clearIcon:{type:W(String),default:"regular circle-xmark"},effect:{type:W(String),default:"light"},label:{type:String,default:void 0,required:!0},collapseTags:Boolean,collapseTagsTooltip:Boolean,maxCollapseTags:{type:Number,default:1},defaultFirstOption:Boolean,disabled:Boolean,estimatedOptionHeight:{type:Number,default:void 0},filterable:Boolean,filterMethod:Function,height:{type:Number,default:274},itemHeight:{type:Number,default:55},id:String,loading:Boolean,loadingText:String,modelValue:{type:W([Array,String,Number,Boolean,Object])},multiple:Boolean,multipleLimit:{type:Number,default:0},name:String,noDataText:String,noMatchText:String,remoteMethod:Function,reserveKeyword:{type:Boolean,default:!0},options:{type:W(Array),required:!0,default:()=>[]},placeholder:{type:String},helpText:{type:String,default:void 0},teleported:kl.teleported,persistent:{type:Boolean,default:!0},popperClass:{type:String,default:""},popperOptions:{type:W(Object),default:()=>({})},remote:Boolean,props:{type:W(Object),default:()=>Ae},valueKey:{type:String,default:"value"},scrollbarAlwaysOn:Boolean,validateEvent:{type:Boolean,default:!0},offset:{type:Number,default:12},showArrow:{type:Boolean,default:!0},placement:{type:W(String),values:xl,default:"bottom-start"},fallbackPlacements:{type:W(Array),default:["bottom-start","top-start","right","left"]},tagType:{...pt.type,default:"info"},tagEffect:{...pt.effect,default:"light"},tabindex:{type:[String,Number],default:0},messageError:{type:String,default:void 0},prefixIcon:{type:W(String),default:""},appendTo:String,fitInputWidth:{type:[Boolean,Number],default:!0,validator(e){return Sl(e)||ze(e)}},...Il,...Ol(["ariaLabel"])}),en=gt({data:Array,disabled:Boolean,hovering:Boolean,item:{type:W(Object),required:!0},index:Number,style:Object,selected:Boolean,created:Boolean}),tn={[ht]:e=>!0,[vt]:e=>!0,"remove-tag":e=>!0,"visible-change":e=>!0,focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0},ln={hover:e=>ze(e),select:(e,n)=>!0},je=Symbol("ElSelectV2Injection"),St=Ie({props:en,emits:ln,components:{GIconFont:mt},setup(e,{emit:n}){const b=ft(je),r=ve("select"),{hoverItem:y,selectOptionClick:v}=Gl(e,{emit:n}),{getIcon:f,getTitle:m,getDescription:B}=Ce(b.props);return{ns:r,hoverItem:y,selectOptionClick:v,getTitle:m,getDescription:B,getIcon:f}}}),nn=["aria-selected","data-test"];function on(e,n,b,r,y,v){const f=fe("g-icon-font");return g(),V("li",{"aria-selected":e.selected,"data-test":`item:${e.getTitle(e.item)}`,style:re(e.style),class:d([e.ns.be("dropdown","item"),e.ns.is("selected",e.selected),e.ns.is("disabled",e.disabled),e.ns.is("created",e.created),e.ns.is("hovering",e.hovering)]),onMousemove:n[0]||(n[0]=(...m)=>e.hoverItem&&e.hoverItem(...m)),onClick:n[1]||(n[1]=q((...m)=>e.selectOptionClick&&e.selectOptionClick(...m),["stop"]))},[L(e.$slots,"default",{item:e.item,index:e.index,disabled:e.disabled},()=>[e.getIcon(e.item)?(g(),me(f,{key:0,name:e.getIcon(e.item),class:d(e.ns.bem("dropdown","item","icon"))},null,8,["name","class"])):R("",!0),T("div",{class:d(e.ns.bem("dropdown","item","content"))},[T("span",{class:d(e.ns.bem("dropdown","item","title"))},A(e.getTitle(e.item)),3),e.getDescription(e.item)?(g(),V("span",{key:0,class:d(e.ns.bem("dropdown","item","description"))},A(e.getDescription(e.item)),3)):R("",!0)],2)])],46,nn)}const an=Ge(St,[["render",on]]);St.__docgenInfo={exportName:"default",displayName:"option-item",description:"",tags:{},slots:[{name:"default",scoped:!0,bindings:[{name:"item",title:"binding"},{name:"index",title:"binding"},{name:"disabled",title:"binding"}]}],sourceFiles:["/home/runner/work/global-design-system/global-design-system/components/select/src/option-item.vue"]};const sn={loading:Boolean,data:{type:Array,required:!0},hoveringIndex:Number,width:Number},rn=Ie({name:"GSelectDropdown",props:sn,setup(e,{slots:n,expose:b}){const r=ft(je),y=ve("select"),{getTitle:v,getValue:f,getDisabled:m}=Ce(r.props),B=O([]),I=O(),C=u(()=>e.data.length);se(()=>C.value,()=>{r.tooltipRef.value.updatePopper?.()});const s=u(()=>wl(r.props.estimatedOptionHeight)),z=u(()=>s.value?{itemSize:r.props.itemHeight}:{estimatedSize:r.props.estimatedOptionHeight,itemSize:c=>B.value[c]}),S=(c=[],p)=>{const{props:{valueKey:$}}=r;return ge(p)?c&&c.some(P=>rl(U(P,$))===U(p,$)):c.includes(p)},k=(c,p)=>{if(ge(p)){const{valueKey:$}=r.props;return U(c,$)===U(p,$)}else return c===p},l=(c,p)=>r.props.multiple?S(c,f(p)):k(c,f(p)),X=(c,p)=>{const{disabled:$,multiple:P,multipleLimit:K}=r.props;return $||!p&&(P?K>0&&c.length>=K:!1)},_=c=>e.hoveringIndex===c;b({listRef:I,isSized:s,isItemDisabled:X,isItemHovering:_,isItemSelected:l,scrollToItem:c=>{const p=I.value;p&&p.scrollToItem(c)},resetScrollTop:()=>{const c=I.value;c&&c.resetScrollTop()}});const Q=c=>{const{index:p,data:$,style:P}=c,K=Ve(s),{itemSize:G,estimatedSize:Z}=Ve(z),{modelValue:D}=r.props,{onSelect:w,onHover:h}=r,F=$[p];if(F.type==="Group")return ne(zl,{item:F,style:P,height:K?G:Z});const j=l(D,F),ke=X(D,j),J=_(p);return ne(an,{...c,selected:j,disabled:m(F)||ke,created:!!F.created,hovering:J,item:F,onSelect:w,onHover:h},{default:Ee=>n.default?.(Ee)||ne("span",{},v(F))})},{onKeyboardNavigate:te,onKeyboardSelect:Te}=r,Y=()=>{te("forward")},be=()=>{te("backward")},le=c=>{const{code:p}=c,{tab:$,esc:P,down:K,up:G,enter:Z,numpadEnter:D}=bt;switch(p!==$&&(c.preventDefault(),c.stopPropagation()),p){case $:case P:break;case K:Y();break;case G:be();break;case Z:case D:Te();break}};return()=>{const{data:c,width:p}=e,{height:$,multiple:P,scrollbarAlwaysOn:K}=r.props,G=Ve(s)?El:$l;return ne("div",{class:[y.b("dropdown"),y.is("multiple",P)],style:{width:`${p}px`}},[n.header?.(),n.loading?.()||n.empty?.()||ne(G,{ref:I,...Ve(z),className:y.be("dropdown","list"),scrollbarAlwaysOn:K,data:c,height:$,width:p,total:c.length,onKeydown:le},{default:Z=>ne(Q,{...Z})}),n.footer?.()].filter(Boolean))}}});function un(e,n){const{aliasProps:b,getTitle:r,getValue:y}=Ce(e),v=O(0),f=O(),m=u(()=>e.allowCreate&&e.filterable);function B(S){const k=l=>r(l)===S;return e.options&&e.options.some(k)||n.createdOptions.some(k)}function I(S){m.value&&(e.multiple&&S.created?v.value++:f.value=S)}function C(S){if(m.value)if(S&&S.length>0){if(B(S))return;const k={[b.value.value]:S,[b.value.title]:S,created:!0,[b.value.disabled]:!1};n.createdOptions.length>=v.value?n.createdOptions[v.value]=k:n.createdOptions.push(k)}else if(e.multiple)n.createdOptions.length=v.value;else{const k=f.value;n.createdOptions.length=0,k&&k.created&&n.createdOptions.push(k)}}function s(S){if(!m.value||!S||!S.created||S.created&&e.reserveKeyword&&n.inputValue===r(S))return;const k=n.createdOptions.findIndex(l=>y(l)===y(S));~k&&(n.createdOptions.splice(k,1),v.value--)}function z(){m.value&&(n.createdOptions.length=0,v.value=0)}return{createNewOption:C,removeNewOption:s,selectNewOption:I,clearAllNewOption:z}}const dn=(e,n)=>{const{t:b}=Cl(),r=ve("select"),y=ve("input"),{form:v,formItem:f}=Nl(),{inputId:m}=Rl(e,{formItemContext:f}),{aliasProps:B,getTitle:I,getValue:C,getDisabled:s,getOptions:z}=Ce(e),{valueOnClear:S,isEmptyValue:k}=Tl(e),l=We({inputValue:"",cachedOptions:[],createdOptions:[],hoveringIndex:-1,inputHovering:!1,selectionWidth:0,collapseItemWidth:0,previousQuery:null,previousValue:void 0,selectedLabel:"",menuVisibleOnFocus:!1,isBeforeHide:!1}),X=O(-1),_=O(),ee=O(),ue=O(),he=O(),Q=O(),te=O(),Te=O(),Y=O(),be=O(),le=O(),{isComposing:c,handleCompositionStart:p,handleCompositionEnd:$,handleCompositionUpdate:P}=Dl({afterComposition:t=>st(t)}),{wrapperRef:K,isFocused:G,handleBlur:Z}=Fl(Q,{beforeFocus(){return j.value},afterFocus(){e.automaticDropdown&&!h.value&&(h.value=!0,l.menuVisibleOnFocus=!0)},beforeBlur(t){return ue.value?.isFocusInsideContent(t)||he.value?.isFocusInsideContent(t)},afterBlur(){h.value=!1,l.menuVisibleOnFocus=!1}}),D=O([]),w=O([]),h=O(!1),F=O(void 0),j=u(()=>e.disabled||v?.disabled),ke=u(()=>{const t=w.value.length*e.itemHeight;return t>e.height?e.height:t}),J=u(()=>e.multiple?ie(e.modelValue)&&e.modelValue.length>0:!k(e.modelValue)),Ee=u(()=>e.clearable&&!j.value&&l.inputHovering&&J.value),qe=u(()=>e.remote&&e.filterable?"":"regular chevron-down"),Vt=u(()=>e.prefixIcon),Ot=u(()=>qe.value&&r.is("reverse",h.value)),$e=u(()=>f?.validateState||""),It=u(()=>{if($e.value)return Ll[$e.value]}),ye=u(()=>f?.shouldShowErrorChild||!!e?.messageError),Ct=u(()=>e?.messageError?e.messageError:f?.validateMessage??""),Tt=u(()=>!!(ye.value||f?.shouldShowError)),kt=u(()=>[r.e("help-text"),{[r.e("help-error")]:ye.value}]),Ue=u(()=>e.remote?300:0),Et=u(()=>!!(f?.$el||ye.value||e.helpText)),Qe=u(()=>e.loading?e.loadingText||b("el.select.loading"):e.remote&&!l.inputValue&&D.value.length===0?!1:e.filterable&&l.inputValue&&D.value.length>0&&w.value.length===0?e.noMatchText||b("el.select.noMatch"):D.value.length===0?e.noDataText||b("el.select.noData"):null),Ye=t=>{const o=a=>{if(e.filterable&&Oe(e.filterMethod)||e.filterable&&e.remote&&Oe(e.remoteMethod))return!0;const i=new RegExp(Wl(t),"i");return t?i.test(I(a)||""):!0};return e.loading?[]:[...l.createdOptions,...e.options].reduce((a,i)=>{const E=z(i);if(ie(E)){const N=E.filter(o);N.length>0&&a.push({title:I(i),type:"Group"},...N)}else(e.remote||o(i))&&a.push(i);return a},[])},Xe=()=>{D.value=Ye(""),w.value=Ye(l.inputValue)},Ze=u(()=>{const t=new Map;return D.value.forEach((o,a)=>{t.set(M(C(o)),{option:o,index:a})}),t}),Se=u(()=>{const t=new Map;return w.value.forEach((o,a)=>{t.set(M(C(o)),{option:o,index:a})}),t}),$t=u(()=>w.value.every(t=>s(t))),de=()=>{if(ze(e.fitInputWidth)){X.value=e.fitInputWidth;return}const t=_.value?.offsetWidth||200;!e.fitInputWidth&&D.value.length>0?oe(()=>{X.value=Math.max(t,Bt())}):X.value=t},Bt=()=>{const o=document.createElement("canvas").getContext("2d"),a=r.be("dropdown","item"),E=(Y.value?.listRef?.innerRef||document).querySelector(`.${a}`);if(E===null||o===null)return 0;const N=getComputedStyle(E),ol=Number.parseFloat(N.paddingLeft)+Number.parseFloat(N.paddingRight);return o.font=N.font,w.value.reduce((al,sl)=>{const il=o.measureText(I(sl));return Math.max(il.width,al)},0)+ol},Mt=()=>{if(!ee.value)return 0;const t=window.getComputedStyle(ee.value);return Number.parseFloat(t.gap||"6px")},Rt=u(()=>{const t=Mt();return{maxWidth:`${le.value&&e.maxCollapseTags===1?l.selectionWidth-l.collapseItemWidth-t:l.selectionWidth}px`}}),Nt=u(()=>({maxWidth:`${l.selectionWidth}px`})),Dt=u(()=>ie(e.modelValue)?e.modelValue.length===0&&!l.inputValue:e.filterable?!l.inputValue:!0),Ft=u(()=>{const t=e.placeholder??"Selecciona una opción";return e.multiple||!J.value?t:l.selectedLabel}),Ht=u(()=>ue.value?.popperRef?.contentRef),Lt=u(()=>{if(e.multiple){const t=e.modelValue.length;if(e.modelValue.length>0&&Se.value.has(e.modelValue[t-1])){const{index:o}=Se.value.get(e.modelValue[t-1]);return o}}else if(!k(e.modelValue)&&Se.value.has(e.modelValue)){const{index:t}=Se.value.get(e.modelValue);return t}return-1}),Pt=u({get(){return h.value&&Qe.value!==!1},set(t){h.value=t}}),Kt=u(()=>e.multiple?e.collapseTags?l.cachedOptions.slice(0,e.maxCollapseTags):l.cachedOptions:[]),Wt=u(()=>e.multiple?e.collapseTags?l.cachedOptions.slice(e.maxCollapseTags):[]:[]),{createNewOption:Je,removeNewOption:Be,selectNewOption:xe,clearAllNewOption:Me}=un(e,l),Re=()=>{j.value||(l.menuVisibleOnFocus?l.menuVisibleOnFocus=!1:h.value=!h.value)},_e=()=>{l.inputValue.length>0&&!h.value&&(h.value=!0),Je(l.inputValue),Ne(l.inputValue)},et=Hl(_e,Ue.value),Ne=t=>{l.previousQuery===t||c.value||(l.previousQuery=t,e.filterable&&Oe(e.filterMethod)?e.filterMethod(t):e.filterable&&e.remote&&Oe(e.remoteMethod)&&e.remoteMethod(t),e.defaultFirstOption&&(e.filterable||e.remote)&&w.value.length?oe(At):oe(xt))},At=()=>{const t=w.value.filter(i=>!i.disabled&&i.type!=="Group"),o=t.find(i=>i.created),a=t[0];l.hoveringIndex=De(w.value,o||a)},zt=t=>{Ke(e.modelValue,t)||n(vt,t)},ce=t=>{n(ht,t),zt(t),l.previousValue=e.multiple?String(t):t},De=(t=[],o)=>{if(!ge(o))return t.indexOf(o);const a=e.valueKey;let i=-1;return t.some((E,N)=>U(E,a)===U(o,a)?(i=N,!0):!1),i},M=t=>ge(t)?U(t,e.valueKey):t,tt=()=>{de()},lt=()=>{l.selectionWidth=ee.value.getBoundingClientRect().width},Gt=()=>{l.collapseItemWidth=le.value.getBoundingClientRect().width},Fe=()=>{ue.value?.updatePopper?.()},nt=()=>{he.value?.updatePopper?.()},ot=t=>{if(e.multiple){let o=e.modelValue.slice();const a=De(o,C(t));a>-1?(o=[...o.slice(0,a),...o.slice(a+1)],l.cachedOptions.splice(a,1),Be(t)):(e.multipleLimit<=0||o.length<e.multipleLimit)&&(o=[...o,C(t)],l.cachedOptions.push(t),xe(t)),ce(o),t.created&&Ne(""),e.filterable&&!e.reserveKeyword&&(l.inputValue="")}else l.selectedLabel=I(t),ce(C(t)),h.value=!1,xe(t),t.created||Me();we()},jt=(t,o)=>{let a=e.modelValue.slice();const i=De(a,C(o));i>-1&&!j.value&&(a=[...e.modelValue.slice(0,i),...e.modelValue.slice(i+1)],l.cachedOptions.splice(i,1),ce(a),n("remove-tag",C(o)),Be(o)),t.stopPropagation(),we()},we=()=>{Q.value?.focus()},qt=()=>{if(h.value){h.value=!1,oe(()=>Q.value?.blur());return}Q.value?.blur()},Ut=()=>{l.inputValue.length>0?l.inputValue="":h.value=!1},Qt=t=>Bl(t,o=>!l.cachedOptions.some(a=>C(a)===o&&s(a))),Yt=t=>{if(e.multiple&&t.code!==bt.delete&&l.inputValue.length===0){t.preventDefault();const o=e.modelValue.slice(),a=Qt(o);if(a<0)return;const i=o[a];o.splice(a,1);const E=l.cachedOptions[a];l.cachedOptions.splice(a,1),Be(E),ce(o),n("remove-tag",i)}},Xt=()=>{let t;ie(e.modelValue)?t=[]:t=S.value,e.multiple?l.cachedOptions=[]:l.selectedLabel="",h.value=!1,ce(t),n("clear"),Me(),we()},at=(t,o=void 0)=>{const a=w.value;if(!["forward","backward"].includes(t)||j.value||a.length<=0||$t.value||c.value)return;if(!h.value)return Re();o===void 0&&(o=l.hoveringIndex);let i=-1;t==="forward"?(i=o+1,i>=a.length&&(i=0)):t==="backward"&&(i=o-1,(i<0||i>=a.length)&&(i=a.length-1));const E=a[i];if(s(E)||E.type==="Group")return at(t,i);l.hoveringIndex=i,He(i)},Zt=()=>{if(h.value)~l.hoveringIndex&&w.value[l.hoveringIndex]&&ot(w.value[l.hoveringIndex]);else return Re()},Jt=t=>{l.hoveringIndex=t??-1},xt=()=>{e.multiple?l.hoveringIndex=w.value.findIndex(t=>e.modelValue.some(o=>M(o)===M(t))):l.hoveringIndex=w.value.findIndex(t=>M(t)===M(e.modelValue))},st=t=>{if(l.inputValue=t.target.value,e.remote)et();else return _e()},_t=t=>{if(h.value=!1,G.value){const o=new FocusEvent("focus",t);Z(o)}},el=()=>(l.isBeforeHide=!1,oe(()=>{~Lt.value&&He(l.hoveringIndex)})),He=t=>{Y.value.scrollToItem(t)},tl=(t,o)=>{const a=M(t);if(Ze.value.has(a)){const{option:i}=Ze.value.get(a);return i}if(o&&o.length){const i=o.find(E=>M(C(E))===a);if(i)return i}return{[B.value.value]:t,[B.value.title]:t}},ll=()=>{if(!e.prefixIcon&&!e.slots.prefix){F.value="-7px";return}requestAnimationFrame(()=>{const t=te.value?.getBoundingClientRect().width;F.value=`${t}px`})},nl=u(()=>({left:J.value||G.value?void 0:`calc(${F.value} + 18px)`})),Le=(t=!1)=>{if(e.multiple)if(e.modelValue.length>0){const o=l.cachedOptions.slice();l.cachedOptions.length=0,l.previousValue=e.modelValue.toString();for(const a of e.modelValue){const i=tl(a,o);l.cachedOptions.push(i)}}else l.cachedOptions=[],l.previousValue=void 0;else if(J.value){l.previousValue=e.modelValue;const o=w.value,a=o.findIndex(i=>M(C(i))===M(e.modelValue));~a?l.selectedLabel=I(o[a]):(!l.selectedLabel||t)&&(l.selectedLabel=M(e.modelValue))}else l.selectedLabel="",l.previousValue=void 0;Me(),de()};return se(()=>e.fitInputWidth,()=>{de()}),se(h,t=>{t?(e.persistent||de(),Ne("")):(l.inputValue="",l.previousQuery=null,l.isBeforeHide=!0,Je("")),n("visible-change",t)}),se(()=>e.modelValue,(t,o)=>{(!t||ie(t)&&t.length===0||e.multiple&&!Ke(t.toString(),l.previousValue)||!e.multiple&&M(t)!==M(l.previousValue))&&Le(!0),!Ke(t,o)&&e.validateEvent&&f?.validate?.("change").catch(i=>Pl())},{deep:!0}),se(()=>e.options,()=>{const t=Q.value;(!t||t&&document.activeElement!==t)&&Le()},{deep:!0,flush:"post"}),se(()=>w.value,()=>(de(),Y.value&&oe(Y.value.resetScrollTop))),it(()=>{l.isBeforeHide||Xe()}),it(()=>{const{valueKey:t,options:o}=e,a=new Map;for(const i of o){const E=C(i);let N=E;if(ge(N)&&(N=U(E,t)),a.get(N))break;a.set(N,!0)}}),ul(()=>{Le()}),x(_,tt),x(ee,lt),x(Y,Fe),x(K,Fe),x(be,nt),x(le,Gt),x(te,ll),{inputId:m,currentPlaceholder:Ft,expanded:h,emptyText:Qe,popupHeight:ke,debounce:Ue,allOptions:D,filteredOptions:w,iconComponent:qe,iconReverse:Ot,prefixIcon:Vt,tagStyle:Rt,collapseTagStyle:Nt,popperSize:X,dropdownMenuVisible:Pt,hasModelValue:J,shouldShowPlaceholder:Dt,selectDisabled:j,showClearBtn:Ee,states:l,isFocused:G,nsSelect:r,nsInput:y,leftPrefixSelect:F,labelStyle:nl,selectError:ye,descriptionError:Ct,helpTextKls:kt,isErrorKls:Tt,hasHelpInfo:Et,inputRef:Q,menuRef:Y,tagMenuRef:be,tooltipRef:ue,tagTooltipRef:he,selectRef:_,wrapperRef:K,selectionRef:ee,prefixRef:te,suffixRef:Te,collapseItemRef:le,popperRef:Ht,validateState:$e,validateIcon:It,showTagList:Kt,collapseTagList:Wt,debouncedOnInputChange:et,deleteTag:jt,getTitle:I,getValue:C,getDisabled:s,getValueKey:M,handleClear:Xt,handleClickOutside:_t,handleDel:Yt,handleEsc:Ut,focus:we,blur:qt,handleMenuEnter:el,handleResize:tt,resetSelectionWidth:lt,updateTooltip:Fe,updateTagTooltip:nt,updateOptions:Xe,toggleMenu:Re,scrollTo:He,onInput:st,onKeyboardNavigate:at,onKeyboardSelect:Zt,onSelect:ot,onHover:Jt,handleCompositionStart:p,handleCompositionEnd:$,handleCompositionUpdate:P}},wt=Ie({name:"GSelect",components:{GSelectMenu:rn,GTag:yl,GTooltip:bl,GIconFont:mt},directives:{ClickOutside:Kl},props:_l,emits:tn,setup(e,{emit:n}){const b=u(()=>{const{modelValue:m,multiple:B}=e,I=B?[]:void 0;return ie(m)?B?m:I:B?I:m}),r=dn(We({...rt(e),modelValue:b,slots:dl()}),n),{calculatorRef:y,inputStyle:v}=Ml();cl(je,{props:We({...rt(e),height:r.popupHeight,modelValue:b}),expanded:r.expanded,tooltipRef:r.tooltipRef,onSelect:r.onSelect,onHover:r.onHover,onKeyboardNavigate:r.onKeyboardNavigate,onKeyboardSelect:r.onKeyboardSelect});const f=u(()=>e.multiple?r.states.cachedOptions.map(m=>m.label):r.states.selectedLabel);return{...r,modelValue:b,selectedLabel:f,calculatorRef:y,inputStyle:v}}}),cn={class:"selectContainer"},pn=["id","autocomplete","tabindex","aria-expanded","aria-label","disabled","readonly","name","data-test"],fn=["textContent"],mn={key:1},gn={key:0};function vn(e,n,b,r,y,v){const f=fe("g-icon-font"),m=fe("g-tag"),B=fe("g-tooltip"),I=fe("g-select-menu"),C=pl("click-outside");return g(),V("div",cn,[Pe((g(),V("div",{ref:"selectRef",class:d([e.nsSelect.b(),e.nsSelect.is("error",e.isErrorKls)]),onMouseenter:n[13]||(n[13]=s=>e.states.inputHovering=!0),onMouseleave:n[14]||(n[14]=s=>e.states.inputHovering=!1)},[ae(B,{ref:"tooltipRef",visible:e.dropdownMenuVisible,teleported:e.teleported,"is-component":"","popper-class":`${e.nsSelect.e("popper")} ${e.popperClass??""}`,"gpu-acceleration":!1,"stop-popper-mouse-event":!1,"popper-options":e.popperOptions,"fallback-placements":e.fallbackPlacements,effect:e.effect,placement:e.placement,pure:"",transition:`${e.nsSelect.namespace.value}-zoom-in-top`,trigger:"click",persistent:e.persistent,"append-to":e.appendTo,"show-arrow":e.showArrow,offset:e.offset,onBeforeShow:e.handleMenuEnter,onHide:n[12]||(n[12]=s=>e.states.isBeforeHide=!1)},{default:H(()=>[T("div",{ref:"wrapperRef",class:d([e.nsSelect.e("wrapper"),e.nsSelect.is("focused",e.isFocused),e.nsSelect.is("hovering",e.states.inputHovering),e.nsSelect.is("filterable",e.filterable),e.nsSelect.is("disabled",e.selectDisabled),e.nsSelect.is("complete",!e.isFocused&&!!e.hasModelValue)]),onClick:n[11]||(n[11]=q((...s)=>e.toggleMenu&&e.toggleMenu(...s),["prevent"]))},[e.$slots.prefix||e.prefixIcon?(g(),V("div",{key:0,ref:"prefixRef",class:d(e.nsSelect.e("prefix"))},[L(e.$slots,"prefix",{},()=>[e.prefixIcon?(g(),me(f,{key:0,class:d([e.nsSelect.e("icon"),e.nsSelect.e("prefix-icon")]),name:e.prefixIcon},null,8,["class","name"])):R("",!0)])],2)):R("",!0),T("div",{ref:"selectionRef",class:d([e.nsSelect.e("selection"),e.nsSelect.is("near",e.multiple&&!e.$slots.prefix&&!!e.modelValue.length)])},[e.multiple?L(e.$slots,"tag",{key:0},()=>[(g(!0),V(ut,null,dt(e.showTagList,s=>(g(),V("div",{key:e.getValueKey(e.getValue(s)),class:d(e.nsSelect.e("selected-item"))},[ae(m,{closable:!e.selectDisabled&&!e.getDisabled(s),type:e.tagType,effect:e.tagEffect,"disable-transitions":"",style:re(e.tagStyle),onClose:z=>e.deleteTag(z,s)},{default:H(()=>[T("span",{class:d(e.nsSelect.e("tags-text"))},[L(e.$slots,"selectedLabel",{label:e.getTitle(s),value:e.getValue(s)},()=>[ct(A(e.getTitle(s)),1)])],2)]),_:2},1032,["closable","type","effect","style","onClose"])],2))),128)),e.collapseTags&&e.modelValue.length>e.maxCollapseTags?(g(),me(B,{key:0,ref:"tagTooltipRef",disabled:e.dropdownMenuVisible||!e.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],effect:e.effect,placement:"bottom",teleported:e.teleported},{default:H(()=>[T("div",{ref:"collapseItemRef",class:d(e.nsSelect.e("selected-item"))},[ae(m,{closable:!1,type:e.tagType,effect:e.tagEffect,style:re(e.collapseTagStyle),"disable-transitions":""},{default:H(()=>[T("span",{class:d(e.nsSelect.e("tags-text"))}," + "+A(e.modelValue.length-e.maxCollapseTags),3)]),_:1},8,["type","effect","style"])],2)]),content:H(()=>[T("div",{ref:"tagMenuRef",class:d(e.nsSelect.e("selection"))},[(g(!0),V(ut,null,dt(e.collapseTagList,s=>(g(),V("div",{key:e.getValueKey(e.getValue(s)),class:d(e.nsSelect.e("selected-item"))},[ae(m,{class:"in-tooltip",closable:!e.selectDisabled&&!e.getDisabled(s),type:e.tagType,effect:e.tagEffect,"disable-transitions":"",onClose:z=>e.deleteTag(z,s)},{default:H(()=>[T("span",{class:d(e.nsSelect.e("tags-text"))},[L(e.$slots,"selectedLabel",{label:e.getTitle(s),value:e.getValue(s)},()=>[ct(A(e.getTitle(s)),1)])],2)]),_:2},1032,["closable","type","effect","onClose"])],2))),128))],2)]),_:3},8,["disabled","effect","teleported"])):R("",!0)]):R("",!0),T("div",{class:d([e.nsSelect.e("selected-item"),e.nsSelect.e("input-wrapper"),e.nsSelect.is("hidden",!e.filterable),e.nsSelect.is("withIcon",!!e.prefixIcon)])},[Pe(T("input",{id:e.inputId,ref:"inputRef","onUpdate:modelValue":n[0]||(n[0]=s=>e.states.inputValue=s),style:re(e.inputStyle),autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-autocomplete":"list","aria-haspopup":"listbox",autocapitalize:"off","aria-expanded":e.expanded,"aria-label":e.ariaLabel,class:d([e.nsSelect.e("input")]),disabled:e.selectDisabled,role:"combobox",readonly:!e.filterable,spellcheck:"false",type:"text",name:e.name,"data-test":`select-input:${e.name||e.label}`,onInput:n[1]||(n[1]=(...s)=>e.onInput&&e.onInput(...s)),onCompositionstart:n[2]||(n[2]=(...s)=>e.handleCompositionStart&&e.handleCompositionStart(...s)),onCompositionupdate:n[3]||(n[3]=(...s)=>e.handleCompositionUpdate&&e.handleCompositionUpdate(...s)),onCompositionend:n[4]||(n[4]=(...s)=>e.handleCompositionEnd&&e.handleCompositionEnd(...s)),onKeydown:[n[5]||(n[5]=pe(q(s=>e.onKeyboardNavigate("backward"),["stop","prevent"]),["up"])),n[6]||(n[6]=pe(q(s=>e.onKeyboardNavigate("forward"),["stop","prevent"]),["down"])),n[7]||(n[7]=pe(q((...s)=>e.onKeyboardSelect&&e.onKeyboardSelect(...s),["stop","prevent"]),["enter"])),n[8]||(n[8]=pe(q((...s)=>e.handleEsc&&e.handleEsc(...s),["stop","prevent"]),["esc"])),n[9]||(n[9]=pe(q((...s)=>e.handleDel&&e.handleDel(...s),["stop"]),["delete"]))],onClick:n[10]||(n[10]=q((...s)=>e.toggleMenu&&e.toggleMenu(...s),["stop"]))},null,46,pn),[[vl,e.states.inputValue]]),e.filterable?(g(),V("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:d(e.nsSelect.e("input-calculator")),textContent:A(e.states.inputValue)},null,10,fn)):R("",!0)],2),e.label?(g(),V("div",{key:1,class:d([e.nsSelect.e("label")]),style:re(e.labelStyle)},A(e.label),7)):R("",!0),e.shouldShowPlaceholder?(g(),V("div",{key:2,class:d([e.nsSelect.e("selected-item"),e.nsSelect.e("placeholder"),e.nsSelect.is("transparent",!e.hasModelValue||e.expanded&&!e.states.inputValue),"dynamic-label-select"])},[e.hasModelValue?L(e.$slots,"selectedLabel",{key:0,label:e.currentPlaceholder,value:e.modelValue},()=>[T("span",null,A(e.currentPlaceholder),1)]):(g(),V("span",mn,A(e.currentPlaceholder),1))],2)):R("",!0)],2),T("div",{ref:"suffixRef",class:d(e.nsSelect.e("suffix"))},[e.iconComponent&&e.showArrow?Pe((g(),me(f,{key:0,class:d([e.nsSelect.e("caret"),e.nsInput.e("icon"),e.iconReverse]),name:e.iconComponent},null,8,["class","name"])),[[hl,!e.showClearBtn]]):R("",!0),e.showClearBtn&&e.clearIcon?(g(),me(f,{key:1,class:d([e.nsSelect.e("caret"),e.nsInput.e("icon"),e.nsSelect.e("clear")]),onClick:q(e.handleClear,["prevent","stop"]),name:"regular circle-xmark"},null,8,["class","onClick"])):R("",!0)],2)],2)]),content:H(()=>[ae(I,{ref:"menuRef",data:e.filteredOptions,width:e.popperSize,"hovering-index":e.states.hoveringIndex,"scrollbar-always-on":e.scrollbarAlwaysOn},fl({default:H(s=>[L(e.$slots,"default",ml(gl(s)))]),_:2},[e.$slots.header?{name:"header",fn:H(()=>[T("div",{class:d(e.nsSelect.be("dropdown","header"))},[L(e.$slots,"header")],2)]),key:"0"}:void 0,e.$slots.loading&&e.loading?{name:"loading",fn:H(()=>[T("div",{class:d(e.nsSelect.be("dropdown","loading"))},[L(e.$slots,"loading")],2)]),key:"1"}:e.loading||e.filteredOptions.length===0?{name:"empty",fn:H(()=>[e.filteredOptions.length===0&&!e.loading?(g(),V("div",gn,[e.$slots.empty?L(e.$slots,"empty",{key:0}):(g(),V("div",{key:1,class:d(e.nsSelect.be("dropdown","empty"))},[T("span",{class:d(e.nsSelect.bem("dropdown","empty","title"))}," No hay coincidencias ",2),T("span",{class:d(e.nsSelect.bem("dropdown","empty","description"))}," Revisa tu búsqueda o intenta con otras palabras ",2)],2))])):R("",!0),e.loading?(g(),V("div",{key:1,class:d(e.nsSelect.be("dropdown","loading"))},[ae(f,{name:"solid spinner","spin-pulse":""})],2)):R("",!0)]),key:"2"}:void 0,e.$slots.footer?{name:"footer",fn:H(()=>[T("div",{class:d(e.nsSelect.be("dropdown","footer"))},[L(e.$slots,"footer")],2)]),key:"3"}:void 0]),1032,["data","width","hovering-index","scrollbar-always-on"])]),_:3},8,["visible","teleported","popper-class","popper-options","fallback-placements","effect","placement","transition","persistent","append-to","show-arrow","offset","onBeforeShow"])],34)),[[C,e.handleClickOutside,e.popperRef]]),e.hasHelpInfo?(g(),V("div",{key:0,class:d([e.nsSelect.e("help")])},[L(e.$slots,"helpText",{selectError:e.selectError},()=>[(g(),V("p",{key:e.selectError?"error":"help",class:d(e.helpTextKls)},A(e.selectError?e.descriptionError:e.helpText),3))])],2)):R("",!0)])}const hn=Ge(wt,[["render",vn]]);wt.__docgenInfo={displayName:"GSelect",exportName:"default",description:"",tags:{},slots:[{name:"prefix"},{name:"tag"},{name:"selectedLabel",scoped:!0,bindings:[{name:"label",title:"binding"},{name:"value",title:"binding"}]},{name:"header"},{name:"default",scoped:!0,bindings:[]},{name:"loading"},{name:"empty"},{name:"footer"},{name:"helpText",scoped:!0,bindings:[{name:"selectError",title:"binding"}]}],sourceFiles:["/home/runner/work/global-design-system/global-design-system/components/select/src/select.vue"]};const Kn=Vl(hn);export{Kn as G,xl as p};
