import{g as te,r as M,c as h,w as Z,o as ae,a as q,d as le,b as G,e as C,f as x,h as j,T as pe,u as o,j as me,k as Y,n as se,l as b,m as _,p as ve,q as ye,s as O,v as ge,t as be,x as A,y as U,F as Ce,z as he,A as we,B as ke,C as Se,D as Be,E as $e}from"./vue.esm-bundler-C43JrhH2.js";import{O as xe,G as Fe,a as Le}from"./index-dphAcb1L.js";import{u as Ee,G as Ae,a as Me}from"./index-BoUrZ4P6.js";import{F as Oe}from"./index-B1PxvDbZ.js";import{y as Pe}from"./index-C3gUrHC2.js";import{f as ze}from"./install-CfJGiCvs.js";import{u as Ie}from"./ConfigProvider-Br84NlF7.js";import{u as W}from"./index-DH2w0SzE.js";import{u as Re}from"./index-D5bIuBCX.js";import{i as Ne}from"./index-CmBD9wVo.js";import{u as H,i as _e}from"./index-DmfABaPz.js";const ne=Symbol("dialogInjectionKey");/**
* @vue/shared v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const De=Object.prototype.hasOwnProperty,Q=(e,t)=>De.call(e,t),Te=e=>typeof e=="function",re=e=>typeof e=="string",ue=e=>e!==null&&typeof e=="object",Xe=e=>typeof e=="boolean",Ve=e=>typeof e=="number",Ye=e=>re(e)?!Number.isNaN(Number(e)):!1;function K(e,t="px"){if(!e)return"";if(Ve(e)||Ye(e))return`${e}${t}`;if(re(e))return e}const ie="__epPropKey",ee=e=>e,je=e=>ue(e)&&!!e[ie],qe=(e,t)=>{if(!ue(e)||je(e))return e;const{values:u,required:l,default:r,type:c,validator:v}=e,m={type:c,required:!!l,validator:u||v?s=>{let i=!1,f=[];if(u&&(f=Array.from(u),Q(e,"default")&&f.push(r),i||(i=f.includes(s))),v&&(i||(i=v(s))),!i&&f.length>0){const y=[...new Set(f)].map(p=>JSON.stringify(p)).join(", ");be(`Invalid prop: validation failed${t?` for prop "${t}"`:""}. Expected one of [${y}], got value ${JSON.stringify(s)}.`)}return i}:void 0,[ie]:!0};return Q(e,"default")&&(m.default=r),m},de=e=>ze(Object.entries(e).map(([t,u])=>[t,qe(u,t)])),Ge=(...e)=>t=>{e.forEach(u=>{Te(u)?u(t):u.value=t})},fe="update:modelValue",ce=de({fullscreen:Boolean,draggable:Boolean,overflow:{type:Boolean,default:!0},alignCenter:{type:Boolean,default:!1},sizeMode:{type:String,values:["default","fixed","adaptive"],default:"default"},title:{type:String,default:""},headerClass:String,bodyClass:String,footerClass:String,showClose:{type:Boolean,default:!0},width:{type:[String,Number]},ariaLevel:{type:String,default:"2"},footerButtons:{type:Array,default:()=>[]}}),Ke=e=>{const{sizeMode:t,width:u}=e;t==="fixed"&&(!u||u==="")&&console.warn('[g-dialog] When sizeMode is set to "fixed", width must be defined.')},Je={close:()=>!0},Ze=de({...ce,appendToBody:{type:Boolean,default:!1},appendTo:{type:ee([String,Object]),default:"body"},beforeClose:{type:ee(Function)},destroyOnClose:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,headerClass:String,bodyClass:String,footerClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!0},ariaLevel:{type:String,default:"2"}}),Ue={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[fe]:e=>Xe(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},We=Symbol(),oe=M();function He(e,t=void 0){const u=te()?q(We,oe):oe;return h(()=>{var l,r;return(r=(l=u.value)==null?void 0:l[e])!=null?r:t})}const Qe=(e,t,{closeOnClickModal:u,closeOnPressEscape:l})=>{const r=te().emit,{nextZIndex:c}=Ie();let v="";const m=W(),s=W(),i=M(!1),f=M(!1),y=M(!1),p=M(e.zIndex??c()),w=h(()=>e.footerButtons?.slice(0,3)||[]),k=h(()=>w.value.length===3?"layout-dual-row":"layout-single-column");let g,S;const P=He("namespace","gui"),z=h(()=>{const B={},J=`--${P.value}-dialog`;return e.fullscreen||(e.top&&(B[`${J}-margin-top`]=e.top),e.width&&(B[`${J}-width`]=K(e.width))),B}),n=h(()=>e.alignCenter?{display:"flex"}:{});function D(){r("opened")}function $(){r("closed"),r(fe,!1),e.destroyOnClose&&(y.value=!1)}function I(){r("close")}function T(){S?.(),g?.(),e.openDelay&&e.openDelay>0?{stop:g}=H(()=>R(),e.openDelay):R()}function X(){g?.(),S?.(),e.closeDelay&&e.closeDelay>0?{stop:S}=H(()=>d(),e.closeDelay):d()}const F=()=>{e.showClose&&(e.beforeClose?e.beforeClose(d):d())};function V(){u.value&&F()}function R(){_e&&(i.value=!0)}function d(){i.value=!1}function L(){r("openAutoFocus")}function a(){r("closeAutoFocus")}function E(B){B.detail?.focusReason==="pointer"&&B.preventDefault()}e.lockScroll&&Ee(i);function N(){l.value&&F()}return Z(()=>e.modelValue,B=>{B?(f.value=!1,T(),y.value=!0,p.value=Ne(e.zIndex)?c():p.value++,Be(()=>{r("open"),t.value&&(t.value.parentElement.scrollTop=0,t.value.parentElement.scrollLeft=0,t.value.scrollTop=0)})):i.value&&X()}),Z(()=>e.fullscreen,B=>{t.value&&(B?(v=t.value.style.transform,t.value.style.transform=""):t.value.style.transform=v)}),ae(()=>{e.modelValue&&(i.value=!0,y.value=!0,T())}),{afterEnter:D,afterLeave:$,beforeLeave:I,handleClose:F,onModalClick:V,close:X,doClose:d,onOpenAutoFocus:L,onCloseAutoFocus:a,onCloseRequested:N,onFocusoutPrevented:E,titleId:m,bodyId:s,closed:f,style:z,overlayDialogStyle:n,rendered:y,visible:i,zIndex:p,displayButtons:w,buttonLayoutClass:k}},eo=(e,t,u,l)=>{let r={offsetX:0,offsetY:0};const c=i=>{const f=i.clientX,y=i.clientY,{offsetX:p,offsetY:w}=r,k=e.value.getBoundingClientRect(),g=k.left,S=k.top,P=k.width,z=k.height,n=document.documentElement.clientWidth,D=document.documentElement.clientHeight,$=-g+p,I=-S+w,T=n-g-P+p,X=D-S-z+w,F=R=>{let d=p+R.clientX-f,L=w+R.clientY-y;l?.value||(d=Math.min(Math.max(d,$),T),L=Math.min(Math.max(L,I),X)),r={offsetX:d,offsetY:L},e.value&&(e.value.style.transform=`translate(${K(d)}, ${K(L)})`)},V=()=>{document.removeEventListener("mousemove",F),document.removeEventListener("mouseup",V)};document.addEventListener("mousemove",F),document.addEventListener("mouseup",V)},v=()=>{t.value&&e.value&&t.value.addEventListener("mousedown",c)},m=()=>{t.value&&e.value&&t.value.removeEventListener("mousedown",c)},s=()=>{r={offsetX:0,offsetY:0},e.value&&(e.value.style.transform="none")};return ae(()=>{ke(()=>{u.value?v():m()})}),Se(()=>{m()}),{resetPosition:s}},oo={key:0,class:"header-content"},to=["id"],ao=["aria-level"],lo=le({__name:"dialog-content",props:ce,emits:Je,setup(e,{expose:t,emit:u}){const l=e,r=u;Ke(l);const{dialogRef:c,headerRef:v,bodyId:m,ns:s,style:i,displayButtons:f,buttonLayoutClass:y}=q(ne),{focusTrapRef:p}=q(Le,{focusTrapRef:c,onKeydown:()=>{}}),w=h(()=>{const n=l.fullscreen?"fullscreen":l.sizeMode||"default";return[s.b(),s.is("draggable",l.draggable),s.is("align-center",l.alignCenter),s.is(n)]}),k=Ge(p,c),g=h(()=>l.draggable&&!l.fullscreen),S=h(()=>l.overflow),{resetPosition:P}=eo(c,c,g,S);t({resetPosition:P});const z=()=>{r("close")};return(n,D)=>(C(),A("div",{ref:o(k),class:b(w.value),style:se(o(i)),tabindex:"-1"},[n.showClose||n.$slots.header?(C(),A("header",{key:0,ref_key:"headerRef",ref:v,class:b([o(s).e("header"),n.headerClass])},[n.$slots.header?(C(),A("div",oo,[O(n.$slots,"header")])):_("",!0),n.showClose?(C(),A("button",{key:1,"aria-label":"Close",class:b(o(s).e("headerbtn")),type:"button",onClick:z},[j(o(Oe),{name:"regular times",class:b(o(s).e("close"))},null,8,["class"])],2)):_("",!0)],2)):_("",!0),Y("div",{id:o(m),class:b([o(s).e("body"),n.bodyClass])},[Y("div",null,[n.$slots.image?(C(),A("div",{key:0,class:b(o(s).e("image"))},[O(n.$slots,"image")],2)):_("",!0),n.title?(C(),A("span",{key:1,class:b(o(s).e("title")),role:"heading","aria-level":n.ariaLevel},U(n.title),11,ao)):_("",!0),Y("div",{class:b(o(s).e("content"))},[O(n.$slots,"default")],2)])],10,to),Y("footer",{class:b([o(s).e("footer"),n.footerClass])},[O(n.$slots,"footer",{},()=>[l.footerButtons?.length?(C(),A("div",{key:0,class:b([o(s).e("footer-buttons"),o(y)])},[(C(!0),A(Ce,null,he(o(f),($,I)=>(C(),G(o(Pe),{key:I,variant:$.variant,full:"",onClick:$.onClick},{default:x(()=>[we(U($.text),1)]),_:2},1032,["variant","onClick"]))),128))],2)):_("",!0)])],2)],6))}}),so=["aria-label","aria-labelledby","aria-describedby"],bo=le({__name:"dialog",props:Ze,emits:Ue,setup(e,{expose:t,emit:u}){const l=e,r=Re("dialog"),c=M(),v=M(),m=M(),s=h(()=>l.showClose&&l.closeOnClickModal),i=h(()=>l.showClose&&l.closeOnPressEscape),{visible:f,titleId:y,bodyId:p,style:w,overlayDialogStyle:k,rendered:g,zIndex:S,afterEnter:P,afterLeave:z,beforeLeave:n,handleClose:D,onModalClick:$,onOpenAutoFocus:I,onCloseAutoFocus:T,onCloseRequested:X,onFocusoutPrevented:F,displayButtons:V,buttonLayoutClass:R}=Qe(l,c,{closeOnClickModal:s,closeOnPressEscape:i});$e(ne,{dialogRef:c,headerRef:v,bodyId:p,ns:r,rendered:g,style:w,displayButtons:V,buttonLayoutClass:R});const d=Me($),L=h(()=>l.draggable&&!l.fullscreen);return t({visible:f,dialogContentRef:m,resetPosition:()=>{m.value?.resetPosition()}}),(a,E)=>(C(),G(o(Fe),{to:a.appendTo,disabled:a.appendTo!=="body"?!1:!a.appendToBody},{default:x(()=>[j(pe,{name:"dialog-fade",onAfterEnter:o(P),onAfterLeave:o(z),onBeforeLeave:o(n)},{default:x(()=>[me(j(o(Ae),{"custom-mask-event":"",mask:a.modal,"overlay-class":a.modalClass,"z-index":o(S)},{default:x(()=>[Y("div",{role:"dialog","aria-modal":"true","aria-label":a.title||void 0,"aria-labelledby":a.title?void 0:o(y),"aria-describedby":o(p),class:b(`${o(r).namespace.value}-overlay-dialog`),style:se(o(k)),onClick:E[0]||(E[0]=(...N)=>o(d).onClick&&o(d).onClick(...N)),onMousedown:E[1]||(E[1]=(...N)=>o(d).onMousedown&&o(d).onMousedown(...N)),onMouseup:E[2]||(E[2]=(...N)=>o(d).onMouseup&&o(d).onMouseup(...N))},[j(o(xe),{loop:"",trapped:o(f),"focus-start-el":"container",onFocusAfterTrapped:o(I),onFocusAfterReleased:o(T),onFocusoutPrevented:o(F),onReleaseRequested:o(X)},{default:x(()=>[o(g)?(C(),G(lo,ve({key:0,ref_key:"dialogContentRef",ref:m},a.$attrs,{"align-center":a.alignCenter,draggable:L.value,overflow:a.overflow,fullscreen:a.fullscreen,"header-class":a.headerClass,"body-class":a.bodyClass,"footer-class":a.footerClass,"show-close":a.showClose,title:a.title,"aria-level":a.ariaLevel,width:a.width,"size-mode":a.sizeMode,"footer-buttons":a.footerButtons,onClose:o(D)}),ye({default:x(()=>[O(a.$slots,"default")]),_:2},[a.$slots.header?{name:"header",fn:x(()=>[O(a.$slots,"header")]),key:"0"}:void 0,a.$slots.image?{name:"image",fn:x(()=>[O(a.$slots,"image")]),key:"1"}:void 0,a.$slots.footer?{name:"footer",fn:x(()=>[O(a.$slots,"footer")]),key:"2"}:void 0]),1040,["align-center","draggable","overflow","fullscreen","header-class","body-class","footer-class","show-close","title","aria-level","width","size-mode","footer-buttons","onClose"])):_("",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,so)]),_:3},8,["mask","overlay-class","z-index"]),[[ge,o(f)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])]),_:3},8,["to","disabled"]))}});export{Ze as e,Ue as o,Qe as s,bo as w};
