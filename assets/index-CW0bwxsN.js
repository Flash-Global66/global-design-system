import{d as ee,Z as ge,_ as nl,x as V,e as g,j as De,m as $,l as p,h as ae,f as D,q as sl,s as K,$ as il,a0 as rl,k as w,a1 as z,b as he,F as nt,z as st,n as re,A as it,y as A,a2 as ve,a3 as ul,v as cl,c,H as Fe,X as pl,a4 as rt,E as dl,t as fl,a as dt,r as k,w as se,u as xe,N as oe,a5 as ml,D as ne,B as ut,o as vl}from"./vue.esm-bundler-DNj4lB-B.js";import{b as gl}from"./index-Bd7W3cLU.js";import{A as ct,Y as hl}from"./index-zNF5UqKu.js";import{v as ft}from"./index-CaVzmfVp.js";import{a as X}from"./index-CP3_1Uby.js";import{G as bl,H as yl}from"./index-CKHqQBpj.js";import{f as Sl,u as be,k as j}from"./install-B47IWttr.js";import{u as wl}from"./index-DG2QIyoI.js";import{b as xl,c as Vl,d as Cl}from"./ConfigProvider-Dyindn-M.js";import{u as Ol}from"./content-dmReybV6.js";import{C as Il}from"./index-hY69rTld.js";import{u as Tl,F as kl,D as El,f as Ml}from"./dynamic-size-list-BHNHdvzl.js";import{a as Rl,u as Bl}from"./index-DxdbiDHw.js";import{d as $l}from"./debounce-C_YaMYrY.js";import{i as Ke}from"./isEqual-BKrdcPcp.js";/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const Ll=Object.prototype.hasOwnProperty,pt=(e,l)=>Ll.call(e,l),ie=Array.isArray,Ve=e=>typeof e=="function",Z=e=>e!==null&&typeof e=="object";const Nl=(e="")=>e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d"),Dl=e=>e===void 0,Kl=e=>typeof e=="boolean",Ae=e=>typeof e=="number";/*! Element Plus Icons Vue v2.3.1 */var Fl=ee({name:"CircleCheck",__name:"circle-check",setup(e){return(l,d)=>(g(),V("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[w("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"}),w("path",{fill:"currentColor",d:"M745.344 361.344a32 32 0 0 1 45.312 45.312l-288 288a32 32 0 0 1-45.312 0l-160-160a32 32 0 1 1 45.312-45.312L480 626.752l265.344-265.408z"})]))}}),Hl=Fl,Al=ee({name:"CircleClose",__name:"circle-close",setup(e){return(l,d)=>(g(),V("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[w("path",{fill:"currentColor",d:"m466.752 512-90.496-90.496a32 32 0 0 1 45.248-45.248L512 466.752l90.496-90.496a32 32 0 1 1 45.248 45.248L557.248 512l90.496 90.496a32 32 0 1 1-45.248 45.248L512 557.248l-90.496 90.496a32 32 0 0 1-45.248-45.248z"}),w("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"})]))}}),Pl=Al,zl=ee({name:"Loading",__name:"loading",setup(e){return(l,d)=>(g(),V("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[w("path",{fill:"currentColor",d:"M512 64a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0V96a32 32 0 0 1 32-32m0 640a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V736a32 32 0 0 1 32-32m448-192a32 32 0 0 1-32 32H736a32 32 0 1 1 0-64h192a32 32 0 0 1 32 32m-640 0a32 32 0 0 1-32 32H96a32 32 0 0 1 0-64h192a32 32 0 0 1 32 32M195.2 195.2a32 32 0 0 1 45.248 0L376.32 331.008a32 32 0 0 1-45.248 45.248L195.2 240.448a32 32 0 0 1 0-45.248zm452.544 452.544a32 32 0 0 1 45.248 0L828.8 783.552a32 32 0 0 1-45.248 45.248L647.744 692.992a32 32 0 0 1 0-45.248zM828.8 195.264a32 32 0 0 1 0 45.184L692.992 376.32a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0m-452.544 452.48a32 32 0 0 1 0 45.248L240.448 828.8a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0z"})]))}}),jl=zl;const mt="__epPropKey",H=e=>e,Wl=e=>Z(e)&&!!e[mt],_l=(e,l)=>{if(!Z(e)||Wl(e))return e;const{values:d,required:r,default:h,type:b,validator:f}=e,m={type:b,required:!!r,validator:d||f?I=>{let y=!1,S=[];if(d&&(S=Array.from(d),pt(e,"default")&&S.push(h),y||(y=S.includes(I))),f&&(y||(y=f(I))),!y&&S.length>0){const n=[...new Set(S)].map(L=>JSON.stringify(L)).join(", ");fl(`Invalid prop: validation failed${l?` for prop "${l}"`:""}. Expected one of [${n}], got value ${JSON.stringify(I)}.`)}return y}:void 0,[mt]:!0};return pt(e,"default")&&(m.default=h),m},vt=e=>Sl(Object.entries(e).map(([l,d])=>[l,_l(d,l)])),Gl={validating:jl,success:Hl,error:Pl},ql=(e,l)=>(e.install=d=>{for(const r of[e,...Object.values({})])d.component(r.name,r)},e),gt={tab:"Tab",enter:"Enter",up:"ArrowUp",down:"ArrowDown",esc:"Escape",delete:"Delete",numpadEnter:"NumpadEnter"},ht="update:modelValue",bt="change",Ul=ee({props:{item:{type:Object,required:!0},style:{type:Object},height:Number},setup(){return{ns:be("select")}}}),Pe=(e,l)=>{const d=e.__vccOpts||e;for(const[r,h]of l)d[r]=h;return d};function Ql(e,l,d,r,h,b){return g(),V("div",{class:p(e.ns.be("group","title")),style:re({...e.style,lineHeight:`${e.height}px`})},A(e.item.label),7)}const Jl=Pe(Ul,[["render",Ql]]);function Yl(e,{emit:l}){return{hoverItem:()=>{e.disabled||l("hover",e.index)},selectOptionClick:()=>{e.disabled||l("select",e.item,e.index)}}}const He={value:"value",disabled:"disabled",options:"options",icon:"icon",title:"title",description:"description"};function Ce(e){const l=c(()=>({...He,...e.props})),d=h=>b=>j(b,l.value[h]),r=Object.keys(He).reduce((h,b)=>(h[`get${b.charAt(0).toUpperCase()+b.slice(1)}`]=d(b),h),{});return{aliasProps:l,...r}}var Xl="top",Zl="bottom",ea="right",ta="left",la="auto",aa=[Xl,Zl,ea,ta],oa="start",na="end",sa=[].concat(aa,[la]).reduce(function(e,l){return e.concat([l,l+"-"+oa,l+"-"+na])},[]);const ia=vt({allowCreate:Boolean,autocomplete:{type:H(String),default:"none"},automaticDropdown:Boolean,clearable:Boolean,clearIcon:{type:H(String),default:"regular circle-xmark"},effect:{type:H(String),default:"light"},label:{type:String,default:void 0,required:!0},collapseTags:Boolean,collapseTagsTooltip:Boolean,maxCollapseTags:{type:Number,default:1},defaultFirstOption:Boolean,disabled:Boolean,estimatedOptionHeight:{type:Number,default:void 0},filterable:Boolean,filterMethod:Function,height:{type:Number,default:274},itemHeight:{type:Number,default:55},id:String,loading:Boolean,loadingText:String,modelValue:{type:H([Array,String,Number,Boolean,Object])},multiple:Boolean,multipleLimit:{type:Number,default:0},name:String,noDataText:String,noMatchText:String,remoteMethod:Function,reserveKeyword:{type:Boolean,default:!0},options:{type:H(Array),required:!0,default:()=>[]},placeholder:{type:String},helpText:{type:String,default:void 0},teleported:Ol.teleported,persistent:{type:Boolean,default:!0},popperClass:{type:String,default:""},popperOptions:{type:H(Object),default:()=>({})},remote:Boolean,props:{type:H(Object),default:()=>He},valueKey:{type:String,default:"value"},scrollbarAlwaysOn:Boolean,validateEvent:{type:Boolean,default:!0},offset:{type:Number,default:12},showArrow:{type:Boolean,default:!0},placement:{type:H(String),values:sa,default:"bottom-start"},fallbackPlacements:{type:H(Array),default:["bottom-start","top-start","right","left"]},tagType:{...ct.type,default:"info"},tagEffect:{...ct.effect,default:"light"},tabindex:{type:[String,Number],default:0},messageError:{type:String,default:void 0},prefixIcon:{type:H(String),default:""},appendTo:String,fitInputWidth:{type:[Boolean,Number],default:!0,validator(e){return Kl(e)||Ae(e)}},...xl,...wl(["ariaLabel"])}),ra=vt({data:Array,disabled:Boolean,hovering:Boolean,item:{type:H(Object),required:!0},index:Number,style:Object,selected:Boolean,created:Boolean}),ua={[ht]:e=>!0,[bt]:e=>!0,"remove-tag":e=>!0,"visible-change":e=>!0,focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0},ca={hover:e=>Ae(e),select:(e,l)=>!0},ze=Symbol("ElSelectV2Injection"),pa=ee({props:ra,emits:ca,components:{GIconFont:ft},setup(e,{emit:l}){const d=dt(ze),r=be("select"),{hoverItem:h,selectOptionClick:b}=Yl(e,{emit:l}),{getIcon:f,getTitle:m,getDescription:I}=Ce(d.props);return{ns:r,hoverItem:h,selectOptionClick:b,getTitle:m,getDescription:I,getIcon:f}}}),da=["aria-selected","data-test"];function fa(e,l,d,r,h,b){const f=ge("g-icon-font");return g(),V("li",{"aria-selected":e.selected,"data-test":`item:${e.getTitle(e.item)}`,style:re(e.style),class:p([e.ns.be("dropdown","item"),e.ns.is("selected",e.selected),e.ns.is("disabled",e.disabled),e.ns.is("created",e.created),e.ns.is("hovering",e.hovering)]),onMousemove:l[0]||(l[0]=(...m)=>e.hoverItem&&e.hoverItem(...m)),onClick:l[1]||(l[1]=z((...m)=>e.selectOptionClick&&e.selectOptionClick(...m),["stop"]))},[K(e.$slots,"default",{item:e.item,index:e.index,disabled:e.disabled},()=>[e.getIcon(e.item)?(g(),he(f,{key:0,name:e.getIcon(e.item),class:p(e.ns.bem("dropdown","item","icon"))},null,8,["name","class"])):$("",!0),w("div",{class:p(e.ns.bem("dropdown","item","content"))},[w("span",{class:p(e.ns.bem("dropdown","item","title"))},A(e.getTitle(e.item)),3),e.getDescription(e.item)?(g(),V("span",{key:0,class:p(e.ns.bem("dropdown","item","description"))},A(e.getDescription(e.item)),3)):$("",!0)],2)])],46,da)}const ma=Pe(pa,[["render",fa]]),va={loading:Boolean,data:{type:Array,required:!0},hoveringIndex:Number,width:Number},ga=ee({name:"GSelectDropdown",props:va,setup(e,{slots:l,expose:d}){const r=dt(ze),h=be("select"),{getTitle:b,getValue:f,getDisabled:m}=Ce(r.props),I=k([]),y=k(),S=c(()=>e.data.length);se(()=>S.value,()=>{r.tooltipRef.value.updatePopper?.()});const n=c(()=>Dl(r.props.estimatedOptionHeight)),L=c(()=>n.value?{itemSize:r.props.itemHeight}:{estimatedSize:r.props.estimatedOptionHeight,itemSize:u=>I.value[u]}),C=(u=[],v)=>{const{props:{valueKey:T}}=r;return Z(v)?u&&u.some(N=>ml(j(N,T))===j(v,T)):u.includes(v)},E=(u,v)=>{if(Z(v)){const{valueKey:T}=r.props;return j(u,T)===j(v,T)}else return u===v},a=(u,v)=>r.props.multiple?C(u,f(v)):E(u,f(v)),G=(u,v)=>{const{disabled:T,multiple:N,multipleLimit:P}=r.props;return T||!v&&(N?P>0&&u.length>=P:!1)},te=u=>e.hoveringIndex===u;d({listRef:y,isSized:n,isItemDisabled:G,isItemHovering:te,isItemSelected:a,scrollToItem:u=>{const v=y.value;v&&v.scrollToItem(u)},resetScrollTop:()=>{const u=y.value;u&&u.resetScrollTop()}});const q=u=>{const{index:v,data:T,style:N}=u,P=xe(n),{itemSize:Q,estimatedSize:J}=xe(L),{modelValue:Y}=r.props,{onSelect:pe,onHover:Ie}=r,R=T[v];if(R.type==="Group")return oe(Jl,{item:R,style:N,height:P?Q:J});const O=a(Y,R),x=G(Y,O),le=te(v);return oe(ma,{...u,selected:O,disabled:m(R)||x,created:!!R.created,hovering:le,item:R,onSelect:pe,onHover:Ie},{default:_=>l.default?.(_)||oe("span",{},b(R))})},{onKeyboardNavigate:U,onKeyboardSelect:ue}=r,W=()=>{U("forward")},ce=()=>{U("backward")},Oe=u=>{const{code:v}=u,{tab:T,esc:N,down:P,up:Q,enter:J,numpadEnter:Y}=gt;switch(v!==T&&(u.preventDefault(),u.stopPropagation()),v){case T:case N:break;case P:W();break;case Q:ce();break;case J:case Y:ue();break}};return()=>{const{data:u,width:v}=e,{height:T,multiple:N,scrollbarAlwaysOn:P}=r.props,Q=xe(n)?kl:El;return oe("div",{class:[h.b("dropdown"),h.is("multiple",N)],style:{width:`${v}px`}},[l.header?.(),l.loading?.()||l.empty?.()||oe(Q,{ref:y,...xe(L),className:h.be("dropdown","list"),scrollbarAlwaysOn:P,data:u,height:T,width:v,total:u.length,onKeydown:Oe},{default:J=>oe(q,{...J})}),l.footer?.()].filter(Boolean))}}});function ha(e,l){const{aliasProps:d,getTitle:r,getValue:h}=Ce(e),b=k(0),f=k(),m=c(()=>e.allowCreate&&e.filterable);function I(C){const E=a=>r(a)===C;return e.options&&e.options.some(E)||l.createdOptions.some(E)}function y(C){m.value&&(e.multiple&&C.created?b.value++:f.value=C)}function S(C){if(m.value)if(C&&C.length>0){if(I(C))return;const E={[d.value.value]:C,[d.value.title]:C,created:!0,[d.value.disabled]:!1};l.createdOptions.length>=b.value?l.createdOptions[b.value]=E:l.createdOptions.push(E)}else if(e.multiple)l.createdOptions.length=b.value;else{const E=f.value;l.createdOptions.length=0,E&&E.created&&l.createdOptions.push(E)}}function n(C){if(!m.value||!C||!C.created||C.created&&e.reserveKeyword&&l.inputValue===r(C))return;const E=l.createdOptions.findIndex(a=>h(a)===h(C));~E&&(l.createdOptions.splice(E,1),b.value--)}function L(){m.value&&(l.createdOptions.length=0,b.value=0)}return{createNewOption:S,removeNewOption:n,selectNewOption:y,clearAllNewOption:L}}const ba=(e,l)=>{const{t:d}=Vl(),r=be("select"),h=be("input"),{form:b,formItem:f}=bl(),{inputId:m}=yl(e,{formItemContext:f}),{aliasProps:I,getTitle:y,getValue:S,getDisabled:n,getOptions:L}=Ce(e),{valueOnClear:C,isEmptyValue:E}=Cl(e),a=Fe({inputValue:"",cachedOptions:[],createdOptions:[],hoveringIndex:-1,inputHovering:!1,selectionWidth:0,collapseItemWidth:0,previousQuery:null,previousValue:void 0,selectedLabel:"",menuVisibleOnFocus:!1,isBeforeHide:!1}),G=k(-1),te=k(),q=k(),U=k(),ue=k(),W=k(),ce=k(),Oe=k(),u=k(),v=k(),T=k(),{isComposing:N,handleCompositionStart:P,handleCompositionEnd:Q,handleCompositionUpdate:J}=Rl({afterComposition:t=>ot(t)}),{wrapperRef:Y,isFocused:pe,handleBlur:Ie}=Bl(W,{beforeFocus(){return _.value},afterFocus(){e.automaticDropdown&&!x.value&&(x.value=!0,a.menuVisibleOnFocus=!0)},beforeBlur(t){return U.value?.isFocusInsideContent(t)||ue.value?.isFocusInsideContent(t)},afterBlur(){x.value=!1,a.menuVisibleOnFocus=!1}}),R=k([]),O=k([]),x=k(!1),le=k(void 0),_=c(()=>e.disabled||b?.disabled),yt=c(()=>{const t=O.value.length*e.itemHeight;return t>e.height?e.height:t}),de=c(()=>e.multiple?ie(e.modelValue)&&e.modelValue.length>0:!E(e.modelValue)),St=c(()=>e.clearable&&!_.value&&a.inputHovering&&de.value),je=c(()=>e.remote&&e.filterable?"":"regular chevron-down"),wt=c(()=>e.prefixIcon),xt=c(()=>je.value&&r.is("reverse",x.value)),Te=c(()=>f?.validateState||""),Vt=c(()=>{if(Te.value)return Gl[Te.value]}),ye=c(()=>f?.shouldShowErrorChild||!!e?.messageError),Ct=c(()=>e?.messageError?e.messageError:f?.validateMessage??""),Ot=c(()=>!!(ye.value||f?.shouldShowError)),It=c(()=>[r.e("help-text"),{[r.e("help-error")]:ye.value}]),We=c(()=>e.remote?300:0),Tt=c(()=>!!(f?.$el||ye.value||e.helpText)),_e=c(()=>e.loading?e.loadingText||d("el.select.loading"):e.remote&&!a.inputValue&&R.value.length===0?!1:e.filterable&&a.inputValue&&R.value.length>0&&O.value.length===0?e.noMatchText||d("el.select.noMatch"):R.value.length===0?e.noDataText||d("el.select.noData"):null),Ge=t=>{const o=s=>{if(e.filterable&&Ve(e.filterMethod)||e.filterable&&e.remote&&Ve(e.remoteMethod))return!0;const i=new RegExp(Nl(t),"i");return t?i.test(y(s)||""):!0};return e.loading?[]:[...a.createdOptions,...e.options].reduce((s,i)=>{const M=L(i);if(ie(M)){const F=M.filter(o);F.length>0&&s.push({title:y(i),type:"Group"},...F)}else(e.remote||o(i))&&s.push(i);return s},[])},qe=()=>{R.value=Ge(""),O.value=Ge(a.inputValue)},Ue=c(()=>{const t=new Map;return R.value.forEach((o,s)=>{t.set(B(S(o)),{option:o,index:s})}),t}),Se=c(()=>{const t=new Map;return O.value.forEach((o,s)=>{t.set(B(S(o)),{option:o,index:s})}),t}),kt=c(()=>O.value.every(t=>n(t))),fe=()=>{if(Ae(e.fitInputWidth)){G.value=e.fitInputWidth;return}const t=te.value?.offsetWidth||200;!e.fitInputWidth&&R.value.length>0?ne(()=>{G.value=Math.max(t,Et())}):G.value=t},Et=()=>{const t=document.createElement("canvas").getContext("2d"),o=r.be("dropdown","item"),s=(u.value?.listRef?.innerRef||document).querySelector(`.${o}`);if(s===null||t===null)return 0;const i=getComputedStyle(s),M=Number.parseFloat(i.paddingLeft)+Number.parseFloat(i.paddingRight);return t.font=i.font,O.value.reduce((F,al)=>{const ol=t.measureText(y(al));return Math.max(ol.width,F)},0)+M},Mt=()=>{if(!q.value)return 0;const t=window.getComputedStyle(q.value);return Number.parseFloat(t.gap||"6px")},Rt=c(()=>{const t=Mt();return{maxWidth:`${T.value&&e.maxCollapseTags===1?a.selectionWidth-a.collapseItemWidth-t:a.selectionWidth}px`}}),Bt=c(()=>({maxWidth:`${a.selectionWidth}px`})),$t=c(()=>ie(e.modelValue)?e.modelValue.length===0&&!a.inputValue:e.filterable?!a.inputValue:!0),Lt=c(()=>{const t=e.placeholder??"Selecciona una opción";return e.multiple||!de.value?t:a.selectedLabel}),Nt=c(()=>U.value?.popperRef?.contentRef),Dt=c(()=>{if(e.multiple){const t=e.modelValue.length;if(e.modelValue.length>0&&Se.value.has(e.modelValue[t-1])){const{index:o}=Se.value.get(e.modelValue[t-1]);return o}}else if(!E(e.modelValue)&&Se.value.has(e.modelValue)){const{index:t}=Se.value.get(e.modelValue);return t}return-1}),Kt=c({get(){return x.value&&_e.value!==!1},set(t){x.value=t}}),Ft=c(()=>e.multiple?e.collapseTags?a.cachedOptions.slice(0,e.maxCollapseTags):a.cachedOptions:[]),Ht=c(()=>e.multiple?e.collapseTags?a.cachedOptions.slice(e.maxCollapseTags):[]:[]),{createNewOption:Qe,removeNewOption:ke,selectNewOption:Je,clearAllNewOption:Ee}=ha(e,a),Me=()=>{_.value||(a.menuVisibleOnFocus?a.menuVisibleOnFocus=!1:x.value=!x.value)},Ye=()=>{a.inputValue.length>0&&!x.value&&(x.value=!0),Qe(a.inputValue),Re(a.inputValue)},Xe=$l(Ye,We.value),Re=t=>{a.previousQuery===t||N.value||(a.previousQuery=t,e.filterable&&Ve(e.filterMethod)?e.filterMethod(t):e.filterable&&e.remote&&Ve(e.remoteMethod)&&e.remoteMethod(t),e.defaultFirstOption&&(e.filterable||e.remote)&&O.value.length?ne(At):ne(Yt))},At=()=>{const t=O.value.filter(i=>!i.disabled&&i.type!=="Group"),o=t.find(i=>i.created),s=t[0];a.hoveringIndex=Be(O.value,o||s)},Pt=t=>{Ke(e.modelValue,t)||l(bt,t)},me=t=>{l(ht,t),Pt(t),a.previousValue=e.multiple?String(t):t},Be=(t=[],o)=>{if(!Z(o))return t.indexOf(o);const s=e.valueKey;let i=-1;return t.some((M,F)=>j(M,s)===j(o,s)?(i=F,!0):!1),i},B=t=>Z(t)?j(t,e.valueKey):t,Ze=()=>{fe()},et=()=>{a.selectionWidth=q.value.getBoundingClientRect().width},zt=()=>{a.collapseItemWidth=T.value.getBoundingClientRect().width},$e=()=>{U.value?.updatePopper?.()},tt=()=>{ue.value?.updatePopper?.()},lt=t=>{if(e.multiple){let o=e.modelValue.slice();const s=Be(o,S(t));s>-1?(o=[...o.slice(0,s),...o.slice(s+1)],a.cachedOptions.splice(s,1),ke(t)):(e.multipleLimit<=0||o.length<e.multipleLimit)&&(o=[...o,S(t)],a.cachedOptions.push(t),Je(t)),me(o),t.created&&Re(""),e.filterable&&!e.reserveKeyword&&(a.inputValue="")}else a.selectedLabel=y(t),me(S(t)),x.value=!1,Je(t),t.created||Ee();we()},jt=(t,o)=>{let s=e.modelValue.slice();const i=Be(s,S(o));i>-1&&!_.value&&(s=[...e.modelValue.slice(0,i),...e.modelValue.slice(i+1)],a.cachedOptions.splice(i,1),me(s),l("remove-tag",S(o)),ke(o)),t.stopPropagation(),we()},we=()=>{W.value?.focus()},Wt=()=>{if(x.value){x.value=!1,ne(()=>W.value?.blur());return}W.value?.blur()},_t=()=>{a.inputValue.length>0?a.inputValue="":x.value=!1},Gt=t=>Ml(t,o=>!a.cachedOptions.some(s=>S(s)===o&&n(s))),qt=t=>{if(e.multiple&&t.code!==gt.delete&&a.inputValue.length===0){t.preventDefault();const o=e.modelValue.slice(),s=Gt(o);if(s<0)return;const i=o[s];o.splice(s,1);const M=a.cachedOptions[s];a.cachedOptions.splice(s,1),ke(M),me(o),l("remove-tag",i)}},Ut=()=>{let t;ie(e.modelValue)?t=[]:t=C.value,e.multiple?a.cachedOptions=[]:a.selectedLabel="",x.value=!1,me(t),l("clear"),Ee(),we()},at=(t,o=void 0)=>{const s=O.value;if(!["forward","backward"].includes(t)||_.value||s.length<=0||kt.value||N.value)return;if(!x.value)return Me();o===void 0&&(o=a.hoveringIndex);let i=-1;t==="forward"?(i=o+1,i>=s.length&&(i=0)):t==="backward"&&(i=o-1,(i<0||i>=s.length)&&(i=s.length-1));const M=s[i];if(n(M)||M.type==="Group")return at(t,i);a.hoveringIndex=i,Le(i)},Qt=()=>{if(x.value)~a.hoveringIndex&&O.value[a.hoveringIndex]&&lt(O.value[a.hoveringIndex]);else return Me()},Jt=t=>{a.hoveringIndex=t??-1},Yt=()=>{e.multiple?a.hoveringIndex=O.value.findIndex(t=>e.modelValue.some(o=>B(o)===B(t))):a.hoveringIndex=O.value.findIndex(t=>B(t)===B(e.modelValue))},ot=t=>{if(a.inputValue=t.target.value,e.remote)Xe();else return Ye()},Xt=t=>{if(x.value=!1,pe.value){const o=new FocusEvent("focus",t);Ie(o)}},Zt=()=>(a.isBeforeHide=!1,ne(()=>{~Dt.value&&Le(a.hoveringIndex)})),Le=t=>{u.value.scrollToItem(t)},el=(t,o)=>{const s=B(t);if(Ue.value.has(s)){const{option:i}=Ue.value.get(s);return i}if(o&&o.length){const i=o.find(M=>B(S(M))===s);if(i)return i}return{[I.value.value]:t,[I.value.title]:t}},tl=()=>{if(!e.prefixIcon&&!e.slots.prefix){le.value="-7px";return}requestAnimationFrame(()=>{const t=ce.value?.getBoundingClientRect().width;le.value=`${t}px`})},ll=c(()=>({left:de.value||pe.value?void 0:`calc(${le.value} + 18px)`})),Ne=(t=!1)=>{if(e.multiple)if(e.modelValue.length>0){const o=a.cachedOptions.slice();a.cachedOptions.length=0,a.previousValue=e.modelValue.toString();for(const s of e.modelValue){const i=el(s,o);a.cachedOptions.push(i)}}else a.cachedOptions=[],a.previousValue=void 0;else if(de.value){a.previousValue=e.modelValue;const o=O.value,s=o.findIndex(i=>B(S(i))===B(e.modelValue));~s?a.selectedLabel=y(o[s]):(!a.selectedLabel||t)&&(a.selectedLabel=B(e.modelValue))}else a.selectedLabel="",a.previousValue=void 0;Ee(),fe()};return se(()=>e.fitInputWidth,()=>{fe()}),se(x,t=>{t?(e.persistent||fe(),Re("")):(a.inputValue="",a.previousQuery=null,a.isBeforeHide=!0,Qe("")),l("visible-change",t)}),se(()=>e.modelValue,(t,o)=>{(!t||ie(t)&&t.length===0||e.multiple&&!Ke(t.toString(),a.previousValue)||!e.multiple&&B(t)!==B(a.previousValue))&&Ne(!0),!Ke(t,o)&&e.validateEvent&&f?.validate?.("change").catch(s=>void 0)},{deep:!0}),se(()=>e.options,()=>{const t=W.value;(!t||t&&document.activeElement!==t)&&Ne()},{deep:!0,flush:"post"}),se(()=>O.value,()=>(fe(),u.value&&ne(u.value.resetScrollTop))),ut(()=>{a.isBeforeHide||qe()}),ut(()=>{const{valueKey:t,options:o}=e,s=new Map;for(const i of o){const M=S(i);let F=M;if(Z(F)&&(F=j(M,t)),s.get(F))break;s.set(F,!0)}}),vl(()=>{Ne()}),X(te,Ze),X(q,et),X(u,$e),X(Y,$e),X(v,tt),X(T,zt),X(ce,tl),{inputId:m,currentPlaceholder:Lt,expanded:x,emptyText:_e,popupHeight:yt,debounce:We,allOptions:R,filteredOptions:O,iconComponent:je,iconReverse:xt,prefixIcon:wt,tagStyle:Rt,collapseTagStyle:Bt,popperSize:G,dropdownMenuVisible:Kt,hasModelValue:de,shouldShowPlaceholder:$t,selectDisabled:_,showClearBtn:St,states:a,isFocused:pe,nsSelect:r,nsInput:h,leftPrefixSelect:le,labelStyle:ll,selectError:ye,descriptionError:Ct,helpTextKls:It,isErrorKls:Ot,hasHelpInfo:Tt,inputRef:W,menuRef:u,tagMenuRef:v,tooltipRef:U,tagTooltipRef:ue,selectRef:te,wrapperRef:Y,selectionRef:q,prefixRef:ce,suffixRef:Oe,collapseItemRef:T,popperRef:Nt,validateState:Te,validateIcon:Vt,showTagList:Ft,collapseTagList:Ht,debouncedOnInputChange:Xe,deleteTag:jt,getTitle:y,getValue:S,getDisabled:n,getValueKey:B,handleClear:Ut,handleClickOutside:Xt,handleDel:qt,handleEsc:_t,focus:we,blur:Wt,handleMenuEnter:Zt,handleResize:Ze,resetSelectionWidth:et,updateTooltip:$e,updateTagTooltip:tt,updateOptions:qe,toggleMenu:Me,scrollTo:Le,onInput:ot,onKeyboardNavigate:at,onKeyboardSelect:Qt,onSelect:lt,onHover:Jt,handleCompositionStart:P,handleCompositionEnd:Q,handleCompositionUpdate:J}},ya=ee({name:"GSelect",components:{GSelectMenu:ga,GTag:hl,GTooltip:gl,GIconFont:ft},directives:{ClickOutside:Il},props:ia,emits:ua,setup(e,{emit:l}){const d=c(()=>{const{modelValue:m,multiple:I}=e,y=I?[]:void 0;return ie(m)?I?m:y:I?y:m}),r=ba(Fe({...rt(e),modelValue:d,slots:pl()}),l),{calculatorRef:h,inputStyle:b}=Tl();dl(ze,{props:Fe({...rt(e),height:r.popupHeight,modelValue:d}),expanded:r.expanded,tooltipRef:r.tooltipRef,onSelect:r.onSelect,onHover:r.onHover,onKeyboardNavigate:r.onKeyboardNavigate,onKeyboardSelect:r.onKeyboardSelect});const f=c(()=>e.multiple?r.states.cachedOptions.map(m=>m.label):r.states.selectedLabel);return{...r,modelValue:d,selectedLabel:f,calculatorRef:h,inputStyle:b}}}),Sa={class:"selectContainer"},wa=["id","autocomplete","tabindex","aria-expanded","aria-label","disabled","readonly","name","data-test"],xa=["textContent"],Va={key:1},Ca={key:0};function Oa(e,l,d,r,h,b){const f=ge("g-icon-font"),m=ge("g-tag"),I=ge("g-tooltip"),y=ge("g-select-menu"),S=nl("click-outside");return g(),V("div",Sa,[De((g(),V("div",{ref:"selectRef",class:p([e.nsSelect.b(),e.nsSelect.is("error",e.isErrorKls)]),onMouseenter:l[13]||(l[13]=n=>e.states.inputHovering=!0),onMouseleave:l[14]||(l[14]=n=>e.states.inputHovering=!1)},[ae(I,{ref:"tooltipRef",visible:e.dropdownMenuVisible,teleported:e.teleported,"is-component":"","popper-class":`${e.nsSelect.e("popper")} ${e.popperClass??""}`,"gpu-acceleration":!1,"stop-popper-mouse-event":!1,"popper-options":e.popperOptions,"fallback-placements":e.fallbackPlacements,effect:e.effect,placement:e.placement,pure:"",transition:`${e.nsSelect.namespace.value}-zoom-in-top`,trigger:"click",persistent:e.persistent,"append-to":e.appendTo,"show-arrow":e.showArrow,offset:e.offset,onBeforeShow:e.handleMenuEnter,onHide:l[12]||(l[12]=n=>e.states.isBeforeHide=!1)},{default:D(()=>[w("div",{ref:"wrapperRef",class:p([e.nsSelect.e("wrapper"),e.nsSelect.is("focused",e.isFocused),e.nsSelect.is("hovering",e.states.inputHovering),e.nsSelect.is("filterable",e.filterable),e.nsSelect.is("disabled",e.selectDisabled),e.nsSelect.is("complete",!e.isFocused&&!!e.hasModelValue)]),onClick:l[11]||(l[11]=z((...n)=>e.toggleMenu&&e.toggleMenu(...n),["prevent"]))},[e.$slots.prefix||e.prefixIcon?(g(),V("div",{key:0,ref:"prefixRef",class:p(e.nsSelect.e("prefix"))},[K(e.$slots,"prefix",{},()=>[e.prefixIcon?(g(),he(f,{key:0,class:p([e.nsSelect.e("icon"),e.nsSelect.e("prefix-icon")]),name:e.prefixIcon},null,8,["class","name"])):$("",!0)])],2)):$("",!0),w("div",{ref:"selectionRef",class:p([e.nsSelect.e("selection"),e.nsSelect.is("near",e.multiple&&!e.$slots.prefix&&!!e.modelValue.length)])},[e.multiple?K(e.$slots,"tag",{key:0},()=>[(g(!0),V(nt,null,st(e.showTagList,n=>(g(),V("div",{key:e.getValueKey(e.getValue(n)),class:p(e.nsSelect.e("selected-item"))},[ae(m,{closable:!e.selectDisabled&&!e.getDisabled(n),type:e.tagType,effect:e.tagEffect,"disable-transitions":"",style:re(e.tagStyle),onClose:L=>e.deleteTag(L,n)},{default:D(()=>[w("span",{class:p(e.nsSelect.e("tags-text"))},[K(e.$slots,"selectedLabel",{label:e.getTitle(n),value:e.getValue(n)},()=>[it(A(e.getTitle(n)),1)])],2)]),_:2},1032,["closable","type","effect","style","onClose"])],2))),128)),e.collapseTags&&e.modelValue.length>e.maxCollapseTags?(g(),he(I,{key:0,ref:"tagTooltipRef",disabled:e.dropdownMenuVisible||!e.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],effect:e.effect,placement:"bottom",teleported:e.teleported},{default:D(()=>[w("div",{ref:"collapseItemRef",class:p(e.nsSelect.e("selected-item"))},[ae(m,{closable:!1,type:e.tagType,effect:e.tagEffect,style:re(e.collapseTagStyle),"disable-transitions":""},{default:D(()=>[w("span",{class:p(e.nsSelect.e("tags-text"))}," + "+A(e.modelValue.length-e.maxCollapseTags),3)]),_:1},8,["type","effect","style"])],2)]),content:D(()=>[w("div",{ref:"tagMenuRef",class:p(e.nsSelect.e("selection"))},[(g(!0),V(nt,null,st(e.collapseTagList,n=>(g(),V("div",{key:e.getValueKey(e.getValue(n)),class:p(e.nsSelect.e("selected-item"))},[ae(m,{class:"in-tooltip",closable:!e.selectDisabled&&!e.getDisabled(n),type:e.tagType,effect:e.tagEffect,"disable-transitions":"",onClose:L=>e.deleteTag(L,n)},{default:D(()=>[w("span",{class:p(e.nsSelect.e("tags-text"))},[K(e.$slots,"selectedLabel",{label:e.getTitle(n),value:e.getValue(n)},()=>[it(A(e.getTitle(n)),1)])],2)]),_:2},1032,["closable","type","effect","onClose"])],2))),128))],2)]),_:3},8,["disabled","effect","teleported"])):$("",!0)]):$("",!0),w("div",{class:p([e.nsSelect.e("selected-item"),e.nsSelect.e("input-wrapper"),e.nsSelect.is("hidden",!e.filterable),e.nsSelect.is("withIcon",!!e.prefixIcon)])},[De(w("input",{id:e.inputId,ref:"inputRef","onUpdate:modelValue":l[0]||(l[0]=n=>e.states.inputValue=n),style:re(e.inputStyle),autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-autocomplete":"list","aria-haspopup":"listbox",autocapitalize:"off","aria-expanded":e.expanded,"aria-label":e.ariaLabel,class:p([e.nsSelect.e("input")]),disabled:e.selectDisabled,role:"combobox",readonly:!e.filterable,spellcheck:"false",type:"text",name:e.name,"data-test":`select-input:${e.name||e.label}`,onInput:l[1]||(l[1]=(...n)=>e.onInput&&e.onInput(...n)),onCompositionstart:l[2]||(l[2]=(...n)=>e.handleCompositionStart&&e.handleCompositionStart(...n)),onCompositionupdate:l[3]||(l[3]=(...n)=>e.handleCompositionUpdate&&e.handleCompositionUpdate(...n)),onCompositionend:l[4]||(l[4]=(...n)=>e.handleCompositionEnd&&e.handleCompositionEnd(...n)),onKeydown:[l[5]||(l[5]=ve(z(n=>e.onKeyboardNavigate("backward"),["stop","prevent"]),["up"])),l[6]||(l[6]=ve(z(n=>e.onKeyboardNavigate("forward"),["stop","prevent"]),["down"])),l[7]||(l[7]=ve(z((...n)=>e.onKeyboardSelect&&e.onKeyboardSelect(...n),["stop","prevent"]),["enter"])),l[8]||(l[8]=ve(z((...n)=>e.handleEsc&&e.handleEsc(...n),["stop","prevent"]),["esc"])),l[9]||(l[9]=ve(z((...n)=>e.handleDel&&e.handleDel(...n),["stop"]),["delete"]))],onClick:l[10]||(l[10]=z((...n)=>e.toggleMenu&&e.toggleMenu(...n),["stop"]))},null,46,wa),[[ul,e.states.inputValue]]),e.filterable?(g(),V("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:p(e.nsSelect.e("input-calculator")),textContent:A(e.states.inputValue)},null,10,xa)):$("",!0)],2),e.label?(g(),V("div",{key:1,class:p([e.nsSelect.e("label")]),style:re(e.labelStyle)},A(e.label),7)):$("",!0),e.shouldShowPlaceholder?(g(),V("div",{key:2,class:p([e.nsSelect.e("selected-item"),e.nsSelect.e("placeholder"),e.nsSelect.is("transparent",!e.hasModelValue||e.expanded&&!e.states.inputValue),"dynamic-label-select"])},[e.hasModelValue?K(e.$slots,"selectedLabel",{key:0,label:e.currentPlaceholder,value:e.modelValue},()=>[w("span",null,A(e.currentPlaceholder),1)]):(g(),V("span",Va,A(e.currentPlaceholder),1))],2)):$("",!0)],2),w("div",{ref:"suffixRef",class:p(e.nsSelect.e("suffix"))},[e.iconComponent&&e.showArrow?De((g(),he(f,{key:0,class:p([e.nsSelect.e("caret"),e.nsInput.e("icon"),e.iconReverse]),name:e.iconComponent},null,8,["class","name"])),[[cl,!e.showClearBtn]]):$("",!0),e.showClearBtn&&e.clearIcon?(g(),he(f,{key:1,class:p([e.nsSelect.e("caret"),e.nsInput.e("icon"),e.nsSelect.e("clear")]),onClick:z(e.handleClear,["prevent","stop"]),name:"regular circle-xmark"},null,8,["class","onClick"])):$("",!0)],2)],2)]),content:D(()=>[ae(y,{ref:"menuRef",data:e.filteredOptions,width:e.popperSize,"hovering-index":e.states.hoveringIndex,"scrollbar-always-on":e.scrollbarAlwaysOn},sl({default:D(n=>[K(e.$slots,"default",il(rl(n)))]),_:2},[e.$slots.header?{name:"header",fn:D(()=>[w("div",{class:p(e.nsSelect.be("dropdown","header"))},[K(e.$slots,"header")],2)]),key:"0"}:void 0,e.$slots.loading&&e.loading?{name:"loading",fn:D(()=>[w("div",{class:p(e.nsSelect.be("dropdown","loading"))},[K(e.$slots,"loading")],2)]),key:"1"}:e.loading||e.filteredOptions.length===0?{name:"empty",fn:D(()=>[e.filteredOptions.length===0&&!e.loading?(g(),V("div",Ca,[e.$slots.empty?K(e.$slots,"empty",{key:0}):(g(),V("div",{key:1,class:p(e.nsSelect.be("dropdown","empty"))},[w("span",{class:p(e.nsSelect.bem("dropdown","empty","title"))}," No hay coincidencias ",2),w("span",{class:p(e.nsSelect.bem("dropdown","empty","description"))}," Revisa tu búsqueda o intenta con otras palabras ",2)],2))])):$("",!0),e.loading?(g(),V("div",{key:1,class:p(e.nsSelect.be("dropdown","loading"))},[ae(f,{name:"solid spinner","spin-pulse":""})],2)):$("",!0)]),key:"2"}:void 0,e.$slots.footer?{name:"footer",fn:D(()=>[w("div",{class:p(e.nsSelect.be("dropdown","footer"))},[K(e.$slots,"footer")],2)]),key:"3"}:void 0]),1032,["data","width","hovering-index","scrollbar-always-on"])]),_:3},8,["visible","teleported","popper-class","popper-options","fallback-placements","effect","placement","transition","persistent","append-to","show-arrow","offset","onBeforeShow"])],34)),[[S,e.handleClickOutside,e.popperRef]]),e.hasHelpInfo?(g(),V("div",{key:0,class:p([e.nsSelect.e("help")])},[K(e.$slots,"helpText",{selectError:e.selectError},()=>[(g(),V("p",{key:e.selectError?"error":"help",class:p(e.helpTextKls)},A(e.selectError?e.descriptionError:e.helpText),3))])],2)):$("",!0)])}const Ia=Pe(ya,[["render",Oa]]),za=ql(Ia);export{za as W};
