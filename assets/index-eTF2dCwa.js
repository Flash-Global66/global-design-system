import{d as Ce,x as O,e as m,y as z,n as ae,l as d,c,a as mt,Z as me,k as I,s as K,b as se,m as M,a1 as j,r as C,w as x,u as pe,I as te,a8 as ge,a5 as ul,H as We,B as it,o as dl,D as le,Y as oe,G as Ie,X as cl,a4 as rt,E as pl,j as Pe,_ as fl,h as ne,f as P,q as ml,$ as gl,a0 as vl,F as ut,z as dt,a2 as fe,a3 as hl,v as bl,A as ct}from"./vue.esm-bundler-C43JrhH2.js";import{b as yl}from"./index-Bjwq1aDC.js";import{A as pt,Y as Sl}from"./index-CPy9gSVE.js";import{F as gt}from"./index-B1PxvDbZ.js";import{u as ve,j as U,m as wl,e as ze,v as Vl}from"./index-D5bIuBCX.js";import{_ as Ae}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{b as vt,d as G,w as Ol}from"./install-CfJGiCvs.js";import{C as ht,U as bt}from"./event-BB_Ol6Sd.js";import{u as Il}from"./index-CdSB2Bdf.js";import{b as Cl,c as Tl,d as kl}from"./ConfigProvider-Br84NlF7.js";import{u as El}from"./content-xefq6HC4.js";import{D as $l,F as Bl,f as Ml,u as Rl}from"./dynamic-size-list-Cx2IIt4N.js";import{E as yt}from"./aria-BUADUvnR.js";import{a as J}from"./index-BDKGuxIf.js";import{H as Nl,G as Dl}from"./index-DH2w0SzE.js";import{a as Hl,u as Fl}from"./index-D_xYoXKA.js";import{d as Ll}from"./debounce-Qaf-XsLG.js";import{V as Pl}from"./icon-BhbO7EM9.js";import{i as Ke}from"./isEqual-Cz4oPyRM.js";import{d as Kl}from"./error-Cq9Fpw4b.js";import{C as Wl}from"./index-hJ8KYCfA.js";const Gl=(e="")=>e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d"),St=Ce({props:{item:{type:Object,required:!0},style:{type:Object},height:Number},setup(){return{ns:ve("select")}}});function zl(e,n,y,r,w,v){return m(),O("div",{class:d(e.ns.be("group","title")),style:ae(e.style)},z(e.item.title),7)}const Al=Ae(St,[["render",zl]]);St.__docgenInfo={exportName:"default",displayName:"group-item",description:"",tags:{},props:[{name:"item",type:{name:"object"},required:!0},{name:"style",type:{name:"CSSProperties"}},{name:"height",type:{name:"number"}}],sourceFiles:["/home/runner/work/global-design-system/global-design-system/components/select/src/group-item.vue"]};function jl(e,{emit:n}){return{hoverItem:()=>{e.disabled||n("hover",e.index)},selectOptionClick:()=>{e.disabled||n("select",e.item,e.index)}}}const Ge={value:"value",disabled:"disabled",options:"options",icon:"icon",title:"title",description:"description"};function Te(e){const n=c(()=>({...Ge,...e.props})),y=w=>v=>U(v,n.value[w]),r=Object.keys(Ge).reduce((w,v)=>(w[`get${v.charAt(0).toUpperCase()+v.slice(1)}`]=y(v),w),{});return{aliasProps:n,...r}}var Ul="top",ql="bottom",Ql="right",Yl="left",Xl="auto",Zl=[Ul,ql,Ql,Yl],Jl="start",xl="end",_l=[].concat(Zl,[Xl]).reduce(function(e,n){return e.concat([n,n+"-"+Jl,n+"-"+xl])},[]);const en=vt({allowCreate:Boolean,autocomplete:{type:G(String),default:"none"},automaticDropdown:Boolean,clearable:Boolean,clearIcon:{type:G(String),default:"regular circle-xmark"},effect:{type:G(String),default:"light"},label:{type:String,default:void 0,required:!0},collapseTags:Boolean,collapseTagsTooltip:Boolean,maxCollapseTags:{type:Number,default:1},defaultFirstOption:Boolean,disabled:Boolean,estimatedOptionHeight:{type:Number,default:void 0},filterable:Boolean,filterMethod:Function,height:{type:Number,default:274},itemHeight:{type:Number,default:55},id:String,loading:Boolean,loadingText:String,modelValue:{type:G([Array,String,Number,Boolean,Object])},multiple:Boolean,multipleLimit:{type:Number,default:0},name:String,noDataText:String,noMatchText:String,remoteMethod:Function,reserveKeyword:{type:Boolean,default:!0},options:{type:G(Array),required:!0,default:()=>[]},placeholder:{type:String},helpText:{type:String,default:void 0},teleported:El.teleported,persistent:{type:Boolean,default:!0},popperClass:{type:String,default:""},popperOptions:{type:G(Object),default:()=>({})},remote:Boolean,props:{type:G(Object),default:()=>Ge},valueKey:{type:String,default:"value"},scrollbarAlwaysOn:Boolean,validateEvent:{type:Boolean,default:!0},offset:{type:Number,default:12},showArrow:{type:Boolean,default:!0},placement:{type:G(String),values:_l,default:"bottom-start"},fallbackPlacements:{type:G(Array),default:["bottom-start","top-start","right","left"]},tagType:{...pt.type,default:"info"},tagEffect:{...pt.effect,default:"light"},emptyDisplay:Boolean,tabindex:{type:[String,Number],default:0},messageError:{type:String,default:void 0},prefixIcon:{type:G(String),default:""},appendTo:String,fitInputWidth:{type:[Boolean,Number],default:!0,validator(e){return wl(e)||ze(e)}},...Cl,...Il(["ariaLabel"])}),tn=vt({data:Array,disabled:Boolean,hovering:Boolean,item:{type:G(Object),required:!0},index:Number,style:Object,selected:Boolean,created:Boolean}),ln={[bt]:e=>!0,[ht]:e=>!0,"remove-tag":e=>!0,"visible-change":e=>!0,focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0},nn={hover:e=>ze(e),select:(e,n)=>!0},je=Symbol("ElSelectV2Injection"),wt=Ce({props:tn,emits:nn,components:{GIconFont:gt},setup(e,{emit:n}){const y=mt(je),r=ve("select"),{hoverItem:w,selectOptionClick:v}=jl(e,{emit:n}),{getIcon:f,getTitle:g,getDescription:k}=Te(y.props),V=y.props.multiple;return{ns:r,hoverItem:w,selectOptionClick:v,getTitle:g,getDescription:k,getIcon:f,multiple:V}}}),on=["aria-selected","data-test"];function an(e,n,y,r,w,v){const f=me("g-icon-font");return m(),O("li",{"aria-selected":e.selected,"data-test":`item:${e.getTitle(e.item)}`,style:ae(e.style),class:d([e.ns.be("dropdown","item"),e.ns.is("selected",e.selected),e.ns.is("disabled",e.disabled),e.ns.is("created",e.created),e.ns.is("hovering",e.hovering)]),onMousemove:n[0]||(n[0]=(...g)=>e.hoverItem&&e.hoverItem(...g)),onClick:n[1]||(n[1]=j((...g)=>e.selectOptionClick&&e.selectOptionClick(...g),["stop"]))},[I("div",{class:d(e.ns.bem("dropdown","item","inner"))},[K(e.$slots,"default",{item:e.item,index:e.index,disabled:e.disabled},()=>[e.getIcon(e.item)?(m(),se(f,{key:0,name:e.getIcon(e.item),class:d(e.ns.bem("dropdown","item","icon"))},null,8,["name","class"])):M("",!0),I("div",{class:d(e.ns.bem("dropdown","item","content"))},[I("span",{class:d(e.ns.bem("dropdown","item","title"))},z(e.getTitle(e.item)),3),e.getDescription(e.item)?(m(),O("span",{key:0,class:d(e.ns.bem("dropdown","item","description"))},z(e.getDescription(e.item)),3)):M("",!0)],2)]),e.selected&&e.multiple?(m(),se(f,{key:0,class:d(e.ns.bem("dropdown","item","check")),name:"solid check","aria-hidden":"true",size:"xl"},null,8,["class"])):M("",!0)],2)],46,on)}const sn=Ae(wt,[["render",an]]);wt.__docgenInfo={exportName:"default",displayName:"option-item",description:"",tags:{},slots:[{name:"default",scoped:!0,bindings:[{name:"item",title:"binding"},{name:"index",title:"binding"},{name:"disabled",title:"binding"}]}],sourceFiles:["/home/runner/work/global-design-system/global-design-system/components/select/src/option-item.vue"]};const ft=34,rn={loading:Boolean,data:{type:Array,required:!0},hoveringIndex:Number,width:Number},un=Ce({name:"GSelectDropdown",props:rn,setup(e,{slots:n,expose:y}){const r=mt(je),w=ve("select"),{getTitle:v,getValue:f,getDisabled:g}=Te(r.props),k=C([]),V=C(),T=c(()=>e.data.length),s=c(()=>e.data.some(u=>u?.type==="Group"));x(()=>T.value,()=>{r.tooltipRef.value.updatePopper?.()}),x(()=>[e.data,r.props.itemHeight],()=>{s.value&&(k.value=e.data.map(u=>u?.type==="Group"?ft:r.props.itemHeight))},{immediate:!0});const H=c(()=>Vl(r.props.estimatedOptionHeight)),S=c(()=>s.value?{estimatedSize:r.props.itemHeight,itemSize:u=>k.value[u]??r.props.itemHeight}:H.value?{itemSize:r.props.itemHeight}:{estimatedSize:r.props.estimatedOptionHeight,itemSize:u=>k.value[u]}),E=(u=[],p)=>{const{props:{valueKey:B}}=r;return ge(p)?u&&u.some(F=>ul(U(F,B))===U(p,B)):u.includes(p)},l=(u,p)=>{if(ge(p)){const{valueKey:B}=r.props;return U(u,B)===U(p,B)}else return u===p},Y=(u,p)=>r.props.multiple?E(u,f(p)):l(u,f(p)),_=(u,p)=>{const{disabled:B,multiple:F,multipleLimit:W}=r.props;return B||!p&&(F?W>0&&u.length>=W:!1)},q=u=>e.hoveringIndex===u;y({listRef:V,isSized:H,isItemDisabled:_,isItemHovering:q,isItemSelected:Y,scrollToItem:u=>{const p=V.value;p&&p.scrollToItem(u)},resetScrollTop:()=>{const u=V.value;u&&u.resetScrollTop()}});const re=u=>{const{index:p,data:B,style:F}=u;pe(H);const{itemSize:W,estimatedSize:ue}=pe(S),{modelValue:R}=r.props,{onSelect:h,onHover:b}=r,L=B[p];if(L.type==="Group")return te(Al,{item:L,style:F,height:ft});const A=Y(R,L),ke=_(R,A),Z=q(p);return te(sn,{...u,selected:A,disabled:g(L)||ke,created:!!L.created,hovering:Z,item:L,onSelect:h,onHover:b},{default:Ee=>n.default?.(Ee)||te("span",{},v(L))})},{onKeyboardNavigate:be,onKeyboardSelect:Q}=r,ye=()=>{be("forward")},ee=()=>{be("backward")},Se=u=>{const{code:p}=u,{tab:B,esc:F,down:W,up:ue,enter:R,numpadEnter:h}=yt;switch(p!==B&&(u.preventDefault(),u.stopPropagation()),p){case B:case F:break;case W:ye();break;case ue:ee();break;case R:case h:Q();break}};return()=>{const{data:u,width:p}=e,{height:B,multiple:F,scrollbarAlwaysOn:W}=r.props,R=pe(s)||!pe(H)?$l:Bl;return te("div",{class:[w.b("dropdown"),w.is("multiple",F)],style:{width:`${p}px`}},[n.header?.(),n.loading?.()||n.empty?.()||te(R,{ref:V,...pe(S),className:w.be("dropdown","list"),scrollbarAlwaysOn:W,data:u,height:B,width:p,total:u.length,onKeydown:Se},{default:h=>te(re,{...h})}),n.footer?.()].filter(Boolean))}}});function dn(e,n){const{aliasProps:y,getTitle:r,getValue:w}=Te(e),v=C(0),f=C(),g=c(()=>e.allowCreate&&e.filterable);function k(S){const E=l=>r(l)===S;return e.options&&e.options.some(E)||n.createdOptions.some(E)}function V(S){g.value&&(e.multiple&&S.created?v.value++:f.value=S)}function T(S){if(g.value)if(S&&S.length>0){if(k(S))return;const E={[y.value.value]:S,[y.value.title]:S,created:!0,[y.value.disabled]:!1};n.createdOptions.length>=v.value?n.createdOptions[v.value]=E:n.createdOptions.push(E)}else if(e.multiple)n.createdOptions.length=v.value;else{const E=f.value;n.createdOptions.length=0,E&&E.created&&n.createdOptions.push(E)}}function s(S){if(!g.value||!S||!S.created||S.created&&e.reserveKeyword&&n.inputValue===r(S))return;const E=n.createdOptions.findIndex(l=>w(l)===w(S));~E&&(n.createdOptions.splice(E,1),v.value--)}function H(){g.value&&(n.createdOptions.length=0,v.value=0)}return{createNewOption:T,removeNewOption:s,selectNewOption:V,clearAllNewOption:H}}const cn=(e,n)=>{const{t:y}=Tl(),r=ve("select"),w=ve("input"),{form:v,formItem:f}=Dl(),{inputId:g}=Nl(e,{formItemContext:f}),{aliasProps:k,getTitle:V,getValue:T,getDisabled:s,getOptions:H}=Te(e),{valueOnClear:S,isEmptyValue:E}=kl(e),l=We({inputValue:"",cachedOptions:[],createdOptions:[],hoveringIndex:-1,inputHovering:!1,selectionWidth:0,collapseItemWidth:0,previousQuery:null,previousValue:void 0,selectedLabel:"",menuVisibleOnFocus:!1,isBeforeHide:!1}),Y=C(-1),_=C(),q=C(),ie=C(),he=C(),X=C(),re=C(),be=C(),Q=C(),ye=C(),ee=C(),{isComposing:Se,handleCompositionStart:u,handleCompositionEnd:p,handleCompositionUpdate:B}=Hl({afterComposition:t=>st(t)}),{wrapperRef:F,isFocused:W,handleBlur:ue}=Fl(X,{beforeFocus(){return A.value},afterFocus(){e.automaticDropdown&&!b.value&&(b.value=!0,l.menuVisibleOnFocus=!0)},beforeBlur(t){return ie.value?.isFocusInsideContent(t)||he.value?.isFocusInsideContent(t)},afterBlur(){b.value=!1,l.menuVisibleOnFocus=!1}}),R=C([]),h=C([]),b=C(!1),L=C(void 0),A=c(()=>e.disabled||v?.disabled),ke=c(()=>{const t=h.value.length*e.itemHeight;return t>e.height?e.height:t}),Z=c(()=>e.multiple?oe(e.modelValue)&&e.modelValue.length>0:!E(e.modelValue)),Ee=c(()=>e.clearable&&!A.value&&l.inputHovering&&Z.value),Ue=c(()=>e.remote&&e.filterable?"":"regular chevron-down"),Ot=c(()=>e.prefixIcon),It=c(()=>Ue.value&&r.is("reverse",b.value)),$e=c(()=>f?.validateState||""),Ct=c(()=>{if($e.value)return Pl[$e.value]}),we=c(()=>f?.shouldShowErrorChild||!!e?.messageError),Tt=c(()=>e?.messageError?e.messageError:f?.validateMessage??""),kt=c(()=>!!(we.value||f?.shouldShowError)),Et=c(()=>[r.e("help-text"),{[r.e("help-error")]:we.value}]),qe=c(()=>e.remote?300:0),$t=c(()=>!!(f?.$el||we.value||e.helpText)),Qe=c(()=>e.loading?e.loadingText||y("el.select.loading"):e.remote&&!l.inputValue&&R.value.length===0?!1:e.filterable&&l.inputValue&&R.value.length>0&&h.value.length===0?e.noMatchText||y("el.select.noMatch"):R.value.length===0?e.noDataText||y("el.select.noData"):null),Ye=t=>{const o=a=>{if(e.filterable&&Ie(e.filterMethod)||e.filterable&&e.remote&&Ie(e.remoteMethod))return!0;const i=new RegExp(Gl(t),"i");return t?i.test(V(a)||""):!0};return e.loading?[]:[...l.createdOptions,...e.options].reduce((a,i)=>{const $=H(i);if(oe($)){const D=$.filter(o);D.length>0&&a.push({title:V(i),type:"Group"},...D)}else(e.remote||o(i))&&a.push(i);return a},[])},Xe=()=>{R.value=Ye(""),h.value=Ye(l.inputValue)},Ze=c(()=>{const t=new Map;return R.value.forEach((o,a)=>{t.set(N(T(o)),{option:o,index:a})}),t}),Ve=c(()=>{const t=new Map;return h.value.forEach((o,a)=>{t.set(N(T(o)),{option:o,index:a})}),t}),Bt=c(()=>h.value.every(t=>s(t))),de=()=>{if(ze(e.fitInputWidth)){Y.value=e.fitInputWidth;return}const t=_.value?.offsetWidth||200;!e.fitInputWidth&&R.value.length>0?le(()=>{Y.value=Math.max(t,Mt())}):Y.value=t},Mt=()=>{const o=document.createElement("canvas").getContext("2d"),a=r.be("dropdown","item"),$=(Q.value?.listRef?.innerRef||document).querySelector(`.${a}`);if($===null||o===null)return 0;const D=getComputedStyle($),al=Number.parseFloat(D.paddingLeft)+Number.parseFloat(D.paddingRight);return o.font=D.font,h.value.reduce((sl,il)=>{const rl=o.measureText(V(il));return Math.max(rl.width,sl)},0)+al},Rt=()=>{if(!q.value)return 0;const t=window.getComputedStyle(q.value);return Number.parseFloat(t.gap||"6px")},Nt=c(()=>{const t=Rt();return{maxWidth:`${ee.value&&e.maxCollapseTags===1?l.selectionWidth-l.collapseItemWidth-t:l.selectionWidth}px`}}),Dt=c(()=>({maxWidth:`${l.selectionWidth}px`})),Ht=c(()=>oe(e.modelValue)?(e.emptyDisplay||e.modelValue.length===0)&&!l.inputValue:e.filterable?!l.inputValue:!0),Ft=c(()=>{const t=e.placeholder??"Selecciona una opción";return e.multiple||!Z.value?t:l.selectedLabel}),Lt=c(()=>ie.value?.popperRef?.contentRef),Pt=c(()=>{if(e.multiple){const t=e.modelValue.length;if(e.modelValue.length>0&&Ve.value.has(e.modelValue[t-1])){const{index:o}=Ve.value.get(e.modelValue[t-1]);return o}}else if(!E(e.modelValue)&&Ve.value.has(e.modelValue)){const{index:t}=Ve.value.get(e.modelValue);return t}return-1}),Kt=c({get(){return b.value&&Qe.value!==!1},set(t){b.value=t}}),Wt=c(()=>e.multiple?e.collapseTags?l.cachedOptions.slice(0,e.maxCollapseTags):l.cachedOptions:[]),Gt=c(()=>e.multiple?e.collapseTags?l.cachedOptions.slice(e.maxCollapseTags):[]:[]),{createNewOption:Je,removeNewOption:Be,selectNewOption:xe,clearAllNewOption:Me}=dn(e,l),Re=()=>{A.value||(l.menuVisibleOnFocus?l.menuVisibleOnFocus=!1:b.value=!b.value)},_e=()=>{l.inputValue.length>0&&!b.value&&(b.value=!0),Je(l.inputValue),Ne(l.inputValue)},et=Ll(_e,qe.value),Ne=t=>{l.previousQuery===t||Se.value||(l.previousQuery=t,e.filterable&&Ie(e.filterMethod)?e.filterMethod(t):e.filterable&&e.remote&&Ie(e.remoteMethod)&&e.remoteMethod(t),e.defaultFirstOption&&(e.filterable||e.remote)&&h.value.length?le(zt):le(_t))},zt=()=>{const t=h.value.filter(i=>!i.disabled&&i.type!=="Group"),o=t.find(i=>i.created),a=t[0];l.hoveringIndex=De(h.value,o||a)},At=t=>{Ke(e.modelValue,t)||n(ht,t)},ce=t=>{n(bt,t),At(t),l.previousValue=e.multiple?String(t):t},De=(t=[],o)=>{if(!ge(o))return t.indexOf(o);const a=e.valueKey;let i=-1;return t.some(($,D)=>U($,a)===U(o,a)?(i=D,!0):!1),i},N=t=>ge(t)?U(t,e.valueKey):t,tt=()=>{de()},lt=()=>{l.selectionWidth=q.value.getBoundingClientRect().width},jt=()=>{l.collapseItemWidth=ee.value.getBoundingClientRect().width},He=()=>{ie.value?.updatePopper?.()},nt=()=>{he.value?.updatePopper?.()},ot=t=>{if(e.multiple){let o=e.modelValue.slice();const a=De(o,T(t));a>-1?(o=[...o.slice(0,a),...o.slice(a+1)],l.cachedOptions.splice(a,1),Be(t)):(e.multipleLimit<=0||o.length<e.multipleLimit)&&(o=[...o,T(t)],l.cachedOptions.push(t),xe(t)),ce(o),t.created&&Ne(""),e.filterable&&!e.reserveKeyword&&(l.inputValue="")}else l.selectedLabel=V(t),ce(T(t)),b.value=!1,xe(t),t.created||Me();Oe()},Ut=(t,o)=>{let a=e.modelValue.slice();const i=De(a,T(o));i>-1&&!A.value&&(a=[...e.modelValue.slice(0,i),...e.modelValue.slice(i+1)],l.cachedOptions.splice(i,1),ce(a),n("remove-tag",T(o)),Be(o)),t.stopPropagation(),Oe()},Oe=()=>{X.value?.focus()},qt=()=>{if(b.value){b.value=!1,le(()=>X.value?.blur());return}X.value?.blur()},Qt=()=>{l.inputValue.length>0?l.inputValue="":b.value=!1},Yt=t=>Ml(t,o=>!l.cachedOptions.some(a=>T(a)===o&&s(a))),Xt=t=>{if(e.multiple&&t.code!==yt.delete&&l.inputValue.length===0){t.preventDefault();const o=e.modelValue.slice(),a=Yt(o);if(a<0)return;const i=o[a];o.splice(a,1);const $=l.cachedOptions[a];l.cachedOptions.splice(a,1),Be($),ce(o),n("remove-tag",i)}},Zt=()=>{let t;oe(e.modelValue)?t=[]:t=S.value,e.multiple?l.cachedOptions=[]:l.selectedLabel="",b.value=!1,ce(t),n("clear"),Me(),Oe()},at=(t,o=void 0)=>{const a=h.value;if(!["forward","backward"].includes(t)||A.value||a.length<=0||Bt.value||Se.value)return;if(!b.value)return Re();o===void 0&&(o=l.hoveringIndex);let i=-1;t==="forward"?(i=o+1,i>=a.length&&(i=0)):t==="backward"&&(i=o-1,(i<0||i>=a.length)&&(i=a.length-1));const $=a[i];if(s($)||$.type==="Group")return at(t,i);l.hoveringIndex=i,Fe(i)},Jt=()=>{if(b.value)~l.hoveringIndex&&h.value[l.hoveringIndex]&&ot(h.value[l.hoveringIndex]);else return Re()},xt=t=>{l.hoveringIndex=t??-1},_t=()=>{e.multiple?l.hoveringIndex=h.value.findIndex(t=>e.modelValue.some(o=>N(o)===N(t))):l.hoveringIndex=h.value.findIndex(t=>N(t)===N(e.modelValue))},st=t=>{if(l.inputValue=t.target.value,e.remote)et();else return _e()},el=t=>{if(b.value=!1,W.value){const o=new FocusEvent("focus",t);ue(o)}},tl=()=>(l.isBeforeHide=!1,le(()=>{~Pt.value&&Fe(l.hoveringIndex)})),Fe=t=>{Q.value.scrollToItem(t)},ll=(t,o)=>{const a=N(t);if(Ze.value.has(a)){const{option:i}=Ze.value.get(a);return i}if(o&&o.length){const i=o.find($=>N(T($))===a);if(i)return i}return{[k.value.value]:t,[k.value.title]:t}},nl=()=>{if(!e.prefixIcon&&!e.slots.prefix){L.value="-7px";return}requestAnimationFrame(()=>{const t=re.value?.getBoundingClientRect().width;L.value=`${t}px`})},ol=c(()=>({left:Z.value||W.value?void 0:`calc(${L.value} + 18px)`})),Le=(t=!1)=>{if(e.multiple)if(e.modelValue.length>0){const o=l.cachedOptions.slice();l.cachedOptions.length=0,l.previousValue=e.modelValue.toString();for(const a of e.modelValue){const i=ll(a,o);l.cachedOptions.push(i)}}else l.cachedOptions=[],l.previousValue=void 0;else if(Z.value){l.previousValue=e.modelValue;const o=h.value,a=o.findIndex(i=>N(T(i))===N(e.modelValue));~a?l.selectedLabel=V(o[a]):(!l.selectedLabel||t)&&(l.selectedLabel=N(e.modelValue))}else l.selectedLabel="",l.previousValue=void 0;Me(),de()};return x(()=>e.fitInputWidth,()=>{de()}),x(b,t=>{t?(e.persistent||de(),Ne("")):(l.inputValue="",l.previousQuery=null,l.isBeforeHide=!0,Je("")),n("visible-change",t)}),x(()=>e.modelValue,(t,o)=>{(!t||oe(t)&&t.length===0||e.multiple&&!Ke(t.toString(),l.previousValue)||!e.multiple&&N(t)!==N(l.previousValue))&&Le(!0),!Ke(t,o)&&e.validateEvent&&f?.validate?.("change").catch(i=>Kl())},{deep:!0}),x(()=>e.options,()=>{const t=X.value;(!t||t&&document.activeElement!==t)&&Le()},{deep:!0,flush:"post"}),x(()=>h.value,()=>(de(),Q.value&&le(Q.value.resetScrollTop))),it(()=>{l.isBeforeHide||Xe()}),it(()=>{const{valueKey:t,options:o}=e,a=new Map;for(const i of o){const $=T(i);let D=$;if(ge(D)&&(D=U($,t)),a.get(D))break;a.set(D,!0)}}),dl(()=>{Le()}),J(_,tt),J(q,lt),J(Q,He),J(F,He),J(ye,nt),J(ee,jt),J(re,nl),{inputId:g,currentPlaceholder:Ft,expanded:b,emptyText:Qe,popupHeight:ke,debounce:qe,allOptions:R,filteredOptions:h,iconComponent:Ue,iconReverse:It,prefixIcon:Ot,tagStyle:Nt,collapseTagStyle:Dt,popperSize:Y,dropdownMenuVisible:Kt,hasModelValue:Z,shouldShowPlaceholder:Ht,selectDisabled:A,showClearBtn:Ee,states:l,isFocused:W,nsSelect:r,nsInput:w,leftPrefixSelect:L,labelStyle:ol,selectError:we,descriptionError:Tt,helpTextKls:Et,isErrorKls:kt,hasHelpInfo:$t,inputRef:X,menuRef:Q,tagMenuRef:ye,tooltipRef:ie,tagTooltipRef:he,selectRef:_,wrapperRef:F,selectionRef:q,prefixRef:re,suffixRef:be,collapseItemRef:ee,popperRef:Lt,validateState:$e,validateIcon:Ct,showTagList:Wt,collapseTagList:Gt,debouncedOnInputChange:et,deleteTag:Ut,getTitle:V,getValue:T,getDisabled:s,getValueKey:N,handleClear:Zt,handleClickOutside:el,handleDel:Xt,handleEsc:Qt,focus:Oe,blur:qt,handleMenuEnter:tl,handleResize:tt,resetSelectionWidth:lt,updateTooltip:He,updateTagTooltip:nt,updateOptions:Xe,toggleMenu:Re,scrollTo:Fe,onInput:st,onKeyboardNavigate:at,onKeyboardSelect:Jt,onSelect:ot,onHover:xt,handleCompositionStart:u,handleCompositionEnd:p,handleCompositionUpdate:B}},Vt=Ce({name:"GSelect",components:{GSelectMenu:un,GTag:Sl,GTooltip:yl,GIconFont:gt},directives:{ClickOutside:Wl},props:en,emits:ln,setup(e,{emit:n}){const y=c(()=>{const{modelValue:g,multiple:k}=e,V=k?[]:void 0;return oe(g)?k?g:V:k?V:g}),r=cn(We({...rt(e),modelValue:y,slots:cl()}),n),{calculatorRef:w,inputStyle:v}=Rl();pl(je,{props:We({...rt(e),height:r.popupHeight,modelValue:y}),expanded:r.expanded,tooltipRef:r.tooltipRef,onSelect:r.onSelect,onHover:r.onHover,onKeyboardNavigate:r.onKeyboardNavigate,onKeyboardSelect:r.onKeyboardSelect});const f=c(()=>e.multiple?r.states.cachedOptions.map(g=>g.label):r.states.selectedLabel);return{...r,modelValue:y,selectedLabel:f,calculatorRef:w,inputStyle:v}}}),pn={class:"selectContainer"},fn=["id","autocomplete","tabindex","aria-expanded","aria-label","disabled","readonly","name","data-test"],mn=["textContent"],gn={key:1},vn={key:0};function hn(e,n,y,r,w,v){const f=me("g-icon-font"),g=me("g-tag"),k=me("g-tooltip"),V=me("g-select-menu"),T=fl("click-outside");return m(),O("div",pn,[Pe((m(),O("div",{ref:"selectRef",class:d([e.nsSelect.b(),e.nsSelect.is("error",e.isErrorKls)]),onMouseenter:n[13]||(n[13]=s=>e.states.inputHovering=!0),onMouseleave:n[14]||(n[14]=s=>e.states.inputHovering=!1)},[ne(k,{ref:"tooltipRef",visible:e.dropdownMenuVisible,teleported:e.teleported,"is-component":"","popper-class":`${e.nsSelect.e("popper")} ${e.popperClass??""}`,"gpu-acceleration":!1,"stop-popper-mouse-event":!1,"popper-options":e.popperOptions,"fallback-placements":e.fallbackPlacements,effect:e.effect,placement:e.placement,pure:"",transition:`${e.nsSelect.namespace.value}-zoom-in-top`,trigger:"click",persistent:e.persistent,"append-to":e.appendTo,"show-arrow":e.showArrow,offset:e.offset,onBeforeShow:e.handleMenuEnter,onHide:n[12]||(n[12]=s=>e.states.isBeforeHide=!1)},{default:P(()=>[I("div",{ref:"wrapperRef",class:d([e.nsSelect.e("wrapper"),e.nsSelect.is("focused",e.isFocused),e.nsSelect.is("hovering",e.states.inputHovering),e.nsSelect.is("filterable",e.filterable),e.nsSelect.is("disabled",e.selectDisabled),e.nsSelect.is("complete",!e.isFocused&&!!e.hasModelValue)]),onClick:n[11]||(n[11]=j((...s)=>e.toggleMenu&&e.toggleMenu(...s),["prevent"]))},[e.$slots.prefix||e.prefixIcon?(m(),O("div",{key:0,ref:"prefixRef",class:d(e.nsSelect.e("prefix"))},[K(e.$slots,"prefix",{},()=>[e.prefixIcon?(m(),se(f,{key:0,class:d([e.nsSelect.e("icon"),e.nsSelect.e("prefix-icon")]),name:e.prefixIcon},null,8,["class","name"])):M("",!0)])],2)):M("",!0),I("div",{ref:"selectionRef",class:d([e.nsSelect.e("selection"),e.nsSelect.is("near",e.multiple&&!e.emptyDisplay&&!e.$slots.prefix&&!!e.modelValue.length)])},[e.multiple&&!e.emptyDisplay?K(e.$slots,"tag",{key:0},()=>[(m(!0),O(ut,null,dt(e.showTagList,s=>(m(),O("div",{key:e.getValueKey(e.getValue(s)),class:d(e.nsSelect.e("selected-item"))},[ne(g,{closable:!e.selectDisabled&&!e.getDisabled(s),type:e.tagType,effect:e.tagEffect,"disable-transitions":"",style:ae(e.tagStyle),onClose:H=>e.deleteTag(H,s)},{default:P(()=>[I("span",{class:d(e.nsSelect.e("tags-text"))},[K(e.$slots,"selectedLabel",{label:e.getTitle(s),value:e.getValue(s)},()=>[ct(z(e.getTitle(s)),1)])],2)]),_:2},1032,["closable","type","effect","style","onClose"])],2))),128)),e.collapseTags&&e.modelValue.length>e.maxCollapseTags?(m(),se(k,{key:0,ref:"tagTooltipRef",disabled:e.dropdownMenuVisible||!e.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],effect:e.effect,placement:"bottom",teleported:e.teleported},{default:P(()=>[I("div",{ref:"collapseItemRef",class:d(e.nsSelect.e("selected-item"))},[ne(g,{closable:!1,type:e.tagType,effect:e.tagEffect,style:ae(e.collapseTagStyle),"disable-transitions":""},{default:P(()=>[I("span",{class:d(e.nsSelect.e("tags-text"))}," + "+z(e.modelValue.length-e.maxCollapseTags),3)]),_:1},8,["type","effect","style"])],2)]),content:P(()=>[I("div",{ref:"tagMenuRef",class:d(e.nsSelect.e("selection"))},[(m(!0),O(ut,null,dt(e.collapseTagList,s=>(m(),O("div",{key:e.getValueKey(e.getValue(s)),class:d(e.nsSelect.e("selected-item"))},[ne(g,{class:"in-tooltip",closable:!e.selectDisabled&&!e.getDisabled(s),type:e.tagType,effect:e.tagEffect,"disable-transitions":"",onClose:H=>e.deleteTag(H,s)},{default:P(()=>[I("span",{class:d(e.nsSelect.e("tags-text"))},[K(e.$slots,"selectedLabel",{label:e.getTitle(s),value:e.getValue(s)},()=>[ct(z(e.getTitle(s)),1)])],2)]),_:2},1032,["closable","type","effect","onClose"])],2))),128))],2)]),_:3},8,["disabled","effect","teleported"])):M("",!0)]):M("",!0),I("div",{class:d([e.nsSelect.e("selected-item"),e.nsSelect.e("input-wrapper"),e.nsSelect.is("hidden",!e.filterable),e.nsSelect.is("withIcon",!!e.prefixIcon)])},[Pe(I("input",{id:e.inputId,ref:"inputRef","onUpdate:modelValue":n[0]||(n[0]=s=>e.states.inputValue=s),style:ae(e.inputStyle),autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-autocomplete":"list","aria-haspopup":"listbox",autocapitalize:"off","aria-expanded":e.expanded,"aria-label":e.ariaLabel,class:d([e.nsSelect.e("input")]),disabled:e.selectDisabled,role:"combobox",readonly:!e.filterable,spellcheck:"false",type:"text",name:e.name,"data-test":`select-input:${e.name||e.label}`,onInput:n[1]||(n[1]=(...s)=>e.onInput&&e.onInput(...s)),onCompositionstart:n[2]||(n[2]=(...s)=>e.handleCompositionStart&&e.handleCompositionStart(...s)),onCompositionupdate:n[3]||(n[3]=(...s)=>e.handleCompositionUpdate&&e.handleCompositionUpdate(...s)),onCompositionend:n[4]||(n[4]=(...s)=>e.handleCompositionEnd&&e.handleCompositionEnd(...s)),onKeydown:[n[5]||(n[5]=fe(j(s=>e.onKeyboardNavigate("backward"),["stop","prevent"]),["up"])),n[6]||(n[6]=fe(j(s=>e.onKeyboardNavigate("forward"),["stop","prevent"]),["down"])),n[7]||(n[7]=fe(j((...s)=>e.onKeyboardSelect&&e.onKeyboardSelect(...s),["stop","prevent"]),["enter"])),n[8]||(n[8]=fe(j((...s)=>e.handleEsc&&e.handleEsc(...s),["stop","prevent"]),["esc"])),n[9]||(n[9]=fe(j((...s)=>e.handleDel&&e.handleDel(...s),["stop"]),["delete"]))],onClick:n[10]||(n[10]=j((...s)=>e.toggleMenu&&e.toggleMenu(...s),["stop"]))},null,46,fn),[[hl,e.states.inputValue]]),e.filterable?(m(),O("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:d(e.nsSelect.e("input-calculator")),textContent:z(e.states.inputValue)},null,10,mn)):M("",!0)],2),e.label?(m(),O("div",{key:1,class:d([e.nsSelect.e("label")]),style:ae(e.labelStyle)},z(e.label),7)):M("",!0),e.shouldShowPlaceholder?(m(),O("div",{key:2,class:d([e.nsSelect.e("selected-item"),e.nsSelect.e("placeholder"),e.nsSelect.is("transparent",!e.hasModelValue||e.expanded&&!e.states.inputValue),"dynamic-label-select"])},[e.hasModelValue?K(e.$slots,"selectedLabel",{key:0,label:e.currentPlaceholder,value:e.modelValue},()=>[I("span",null,z(e.currentPlaceholder),1)]):(m(),O("span",gn,z(e.currentPlaceholder),1))],2)):M("",!0)],2),I("div",{ref:"suffixRef",class:d(e.nsSelect.e("suffix"))},[e.iconComponent&&e.showArrow?Pe((m(),se(f,{key:0,class:d([e.nsSelect.e("caret"),e.nsInput.e("icon"),e.iconReverse]),name:e.iconComponent},null,8,["class","name"])),[[bl,!e.showClearBtn]]):M("",!0),e.showClearBtn&&e.clearIcon?(m(),se(f,{key:1,class:d([e.nsSelect.e("caret"),e.nsInput.e("icon"),e.nsSelect.e("clear")]),onClick:j(e.handleClear,["prevent","stop"]),name:"regular circle-xmark"},null,8,["class","onClick"])):M("",!0)],2)],2)]),content:P(()=>[ne(V,{ref:"menuRef",data:e.filteredOptions,width:e.popperSize,"hovering-index":e.states.hoveringIndex,"scrollbar-always-on":e.scrollbarAlwaysOn},ml({default:P(s=>[K(e.$slots,"default",gl(vl(s)))]),_:2},[e.$slots.header?{name:"header",fn:P(()=>[I("div",{class:d(e.nsSelect.be("dropdown","header"))},[K(e.$slots,"header")],2)]),key:"0"}:void 0,e.$slots.loading&&e.loading?{name:"loading",fn:P(()=>[I("div",{class:d(e.nsSelect.be("dropdown","loading"))},[K(e.$slots,"loading")],2)]),key:"1"}:e.loading||e.filteredOptions.length===0?{name:"empty",fn:P(()=>[e.filteredOptions.length===0&&!e.loading?(m(),O("div",vn,[e.$slots.empty?K(e.$slots,"empty",{key:0}):(m(),O("div",{key:1,class:d(e.nsSelect.be("dropdown","empty"))},[I("span",{class:d(e.nsSelect.bem("dropdown","empty","title"))}," No hay coincidencias ",2),I("span",{class:d(e.nsSelect.bem("dropdown","empty","description"))}," Revisa tu búsqueda o intenta con otras palabras ",2)],2))])):M("",!0),e.loading?(m(),O("div",{key:1,class:d(e.nsSelect.be("dropdown","loading"))},[ne(f,{name:"solid spinner","spin-pulse":""})],2)):M("",!0)]),key:"2"}:void 0,e.$slots.footer?{name:"footer",fn:P(()=>[I("div",{class:d(e.nsSelect.be("dropdown","footer"))},[K(e.$slots,"footer")],2)]),key:"3"}:void 0]),1032,["data","width","hovering-index","scrollbar-always-on"])]),_:3},8,["visible","teleported","popper-class","popper-options","fallback-placements","effect","placement","transition","persistent","append-to","show-arrow","offset","onBeforeShow"])],34)),[[T,e.handleClickOutside,e.popperRef]]),e.hasHelpInfo?(m(),O("div",{key:0,class:d([e.nsSelect.e("help")])},[K(e.$slots,"helpText",{selectError:e.selectError},()=>[(m(),O("p",{key:e.selectError?"error":"help",class:d(e.helpTextKls)},z(e.selectError?e.descriptionError:e.helpText),3))])],2)):M("",!0)])}const bn=Ae(Vt,[["render",hn]]);Vt.__docgenInfo={displayName:"GSelect",exportName:"default",description:"",tags:{},slots:[{name:"prefix"},{name:"tag"},{name:"selectedLabel",scoped:!0,bindings:[{name:"label",title:"binding"},{name:"value",title:"binding"}]},{name:"header"},{name:"default",scoped:!0,bindings:[]},{name:"loading"},{name:"empty"},{name:"footer"},{name:"helpText",scoped:!0,bindings:[{name:"selectError",title:"binding"}]}],sourceFiles:["/home/runner/work/global-design-system/global-design-system/components/select/src/select.vue"]};const Gn=Ol(bn);export{Gn as G,_l as p};
